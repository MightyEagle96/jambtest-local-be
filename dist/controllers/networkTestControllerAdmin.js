'use strict';const a12_0x3b3a29=a12_0x3363;(function(_0x4ec538,_0xd7d62){const _0x43cd45=a12_0x3363,_0x5a4856=_0x4ec538();while(!![]){try{const _0x3743b2=-parseInt(_0x43cd45(0x1da))/0x1+parseInt(_0x43cd45(0x224))/0x2+-parseInt(_0x43cd45(0x1dc))/0x3+parseInt(_0x43cd45(0x1de))/0x4*(parseInt(_0x43cd45(0x203))/0x5)+-parseInt(_0x43cd45(0x1d2))/0x6+parseInt(_0x43cd45(0x1c6))/0x7*(-parseInt(_0x43cd45(0x202))/0x8)+parseInt(_0x43cd45(0x227))/0x9;if(_0x3743b2===_0xd7d62)break;else _0x5a4856['push'](_0x5a4856['shift']());}catch(_0x33bb95){_0x5a4856['push'](_0x5a4856['shift']());}}}(a12_0x8bcf,0x65b7f));var __awaiter=this&&this[a12_0x3b3a29(0x1cb)]||function(_0x355207,_0x54ba6a,_0x16a188,_0x47dbfb){function _0xa8be69(_0x595706){return _0x595706 instanceof _0x16a188?_0x595706:new _0x16a188(function(_0x9c22a1){_0x9c22a1(_0x595706);});}return new(_0x16a188||(_0x16a188=Promise))(function(_0x1fd60f,_0x163429){const _0x24a93=a12_0x3363;function _0x556f88(_0x2fe147){const _0x329bb0=a12_0x3363;try{_0x452874(_0x47dbfb[_0x329bb0(0x1c5)](_0x2fe147));}catch(_0x21d33f){_0x163429(_0x21d33f);}}function _0x3123e3(_0x58d7c6){const _0x33d344=a12_0x3363;try{_0x452874(_0x47dbfb[_0x33d344(0x211)](_0x58d7c6));}catch(_0x1d0f0a){_0x163429(_0x1d0f0a);}}function _0x452874(_0x2b0d07){const _0x198cc1=a12_0x3363;_0x2b0d07[_0x198cc1(0x1fa)]?_0x1fd60f(_0x2b0d07[_0x198cc1(0x1fc)]):_0xa8be69(_0x2b0d07['value'])[_0x198cc1(0x221)](_0x556f88,_0x3123e3);}_0x452874((_0x47dbfb=_0x47dbfb[_0x24a93(0x1f2)](_0x355207,_0x54ba6a||[]))['next']());});},__importDefault=this&&this[a12_0x3b3a29(0x1ff)]||function(_0xa405d1){return _0xa405d1&&_0xa405d1['__esModule']?_0xa405d1:{'default':_0xa405d1};};Object[a12_0x3b3a29(0x1d8)](exports,a12_0x3b3a29(0x20b),{'value':!![]}),exports[a12_0x3b3a29(0x209)]=exports['networkPing']=exports[a12_0x3b3a29(0x1db)]=exports[a12_0x3b3a29(0x1e9)]=exports[a12_0x3b3a29(0x219)]=exports['endNetworkTestForAdmin']=exports[a12_0x3b3a29(0x1e5)]=exports[a12_0x3b3a29(0x1f0)]=exports[a12_0x3b3a29(0x1cd)]=exports['createNetworkTest']=void 0x0;const httpService_1=require(a12_0x3b3a29(0x20f)),centreModel_1=__importDefault(require(a12_0x3b3a29(0x1d0))),networkTest_1=__importDefault(require(a12_0x3b3a29(0x217))),networkTestResponse_1=__importDefault(require(a12_0x3b3a29(0x223))),mongoose_1=__importDefault(require(a12_0x3b3a29(0x1c1))),computerModel_1=__importDefault(require(a12_0x3b3a29(0x1bb))),generateId_1=require(a12_0x3b3a29(0x1e4)),activeTestIntervals=new Map(),checkLastActive=_0x58b003=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x967712=a12_0x3b3a29,_0x4004c9=new Date(Date[_0x967712(0x1fd)]()-0x3c*0x3e8),_0x17ec93=yield networkTestResponse_1[_0x967712(0x1ce)][_0x967712(0x1ba)]({'networkTest':_0x58b003,'updatedAt':{'$lt':_0x4004c9}});for(const _0x583b25 of _0x17ec93){_0x583b25['status']===_0x967712(0x205)&&(_0x583b25[_0x967712(0x1d4)]=_0x967712(0x21a),_0x583b25['networkLosses']+=0x1,yield _0x583b25[_0x967712(0x1dd)]());}}),createNetworkTest=(_0xaf0d9a,_0x5bd74a)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1011a1=a12_0x3b3a29;var _0x242a07;const _0x326862=yield networkTest_1[_0x1011a1(0x1ce)]['findOne']({'status':{'$ne':_0x1011a1(0x213)}});if(_0x326862)return _0x5bd74a[_0x1011a1(0x1d4)](0x190)[_0x1011a1(0x21f)](_0x1011a1(0x1c7));const [_0x3788a7,_0x3bf8a6]=yield Promise[_0x1011a1(0x220)]([computerModel_1['default']['countDocuments'](),computerModel_1['default']['countDocuments']({'status':'uploaded'})]);if(_0x3bf8a6===0x0)return _0x5bd74a[_0x1011a1(0x1d4)](0x190)[_0x1011a1(0x21f)](_0x1011a1(0x1d6));if(_0x3788a7!==_0x3bf8a6)return _0x5bd74a[_0x1011a1(0x1d4)](0x190)[_0x1011a1(0x21f)]('All\x20computers\x20must\x20be\x20uploaded\x20before\x20creating\x20a\x20test');const _0x6fb81c=(0x0,generateId_1[_0x1011a1(0x1fe)])();_0xaf0d9a['body']['duration']=Number(_0xaf0d9a[_0x1011a1(0x1e3)][_0x1011a1(0x1e7)]*0x3c*0x3e8),_0xaf0d9a['body'][_0x1011a1(0x1e0)]=(_0x242a07=_0xaf0d9a[_0x1011a1(0x1e0)])===null||_0x242a07===void 0x0?void 0x0:_0x242a07[_0x1011a1(0x206)][_0x1011a1(0x1eb)](),_0xaf0d9a[_0x1011a1(0x1e3)][_0x1011a1(0x1ec)]=_0x6fb81c,yield networkTest_1[_0x1011a1(0x1ce)][_0x1011a1(0x1ee)](_0xaf0d9a[_0x1011a1(0x1e3)]),_0x5bd74a[_0x1011a1(0x21f)](_0x1011a1(0x1d3));});exports[a12_0x3b3a29(0x1bd)]=createNetworkTest;function a12_0x3363(_0x14a873,_0x402272){const _0x8bcfcb=a12_0x8bcf();return a12_0x3363=function(_0x3363cc,_0x51f0ed){_0x3363cc=_0x3363cc-0x1b9;let _0xfc507f=_0x8bcfcb[_0x3363cc];return _0xfc507f;},a12_0x3363(_0x14a873,_0x402272);}const viewNetworkTests=(_0x5bf912,_0xb8b937)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x60e6a9=a12_0x3b3a29;var _0x339966,_0x3ea527;try{const _0x5561d7=_0x5bf912[_0x60e6a9(0x208)][_0x60e6a9(0x1e6)]||0x1,_0x244019=_0x5bf912[_0x60e6a9(0x208)]['limit']||0x32,_0x594317=yield networkTest_1[_0x60e6a9(0x1ce)][_0x60e6a9(0x1ba)]({'centre':(_0x339966=_0x5bf912[_0x60e6a9(0x1e0)])===null||_0x339966===void 0x0?void 0x0:_0x339966[_0x60e6a9(0x206)]['toString']()})['skip']((_0x5561d7-0x1)*_0x244019)[_0x60e6a9(0x1bc)](_0x244019)[_0x60e6a9(0x218)](),_0x412c34=yield networkTest_1[_0x60e6a9(0x1ce)][_0x60e6a9(0x1bf)]({'centre':(_0x3ea527=_0x5bf912[_0x60e6a9(0x1e0)])===null||_0x3ea527===void 0x0?void 0x0:_0x3ea527[_0x60e6a9(0x206)][_0x60e6a9(0x1eb)]()}),_0x39d880=_0x594317[_0x60e6a9(0x207)]((_0x2cfb75,_0x4b5b84)=>{const _0x559896=_0x60e6a9;return Object['assign'](Object[_0x559896(0x1e1)]({},_0x2cfb75),{'id':(_0x5561d7-0x1)*_0x244019+_0x4b5b84+0x1});});_0xb8b937[_0x60e6a9(0x21f)]({'total':_0x412c34,'networkTests':_0x39d880});}catch(_0x258a98){_0xb8b937[_0x60e6a9(0x1d4)](0x1f4)[_0x60e6a9(0x21f)](_0x60e6a9(0x225));}});exports[a12_0x3b3a29(0x1cd)]=viewNetworkTests;const deleteNetworkTest=(_0x236954,_0xa54c55)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x43dce1=a12_0x3b3a29;try{const _0x53040d=_0x236954[_0x43dce1(0x208)]['id'],_0x2753b5=yield networkTest_1['default'][_0x43dce1(0x1d7)](_0x53040d);if(!_0x2753b5)return _0xa54c55[_0x43dce1(0x1d4)](0x194)['send'](_0x43dce1(0x1c2));if(_0x2753b5[_0x43dce1(0x216)])return _0xa54c55[_0x43dce1(0x1d4)](0x190)[_0x43dce1(0x21f)](_0x43dce1(0x1d9));const _0x2f6e51=activeTestIntervals[_0x43dce1(0x1f9)](_0x53040d);_0x2f6e51&&(clearInterval(_0x2f6e51),activeTestIntervals[_0x43dce1(0x1c3)](_0x53040d)),yield networkTest_1[_0x43dce1(0x1ce)][_0x43dce1(0x1ef)](_0x53040d),yield networkTestResponse_1[_0x43dce1(0x1ce)][_0x43dce1(0x226)]({'networkTest':_0x53040d}),_0xa54c55['send'](_0x43dce1(0x1cc));}catch(_0x4dc3de){console['error'](_0x43dce1(0x20e),_0x4dc3de),_0xa54c55[_0x43dce1(0x1d4)](0x1f4)['send'](_0x43dce1(0x225));}});exports[a12_0x3b3a29(0x1f0)]=deleteNetworkTest;const toggleActivation=(_0x3a6243,_0x27532e)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x44eda7=a12_0x3b3a29;try{const _0x395cc5=_0x3a6243[_0x44eda7(0x208)]['id'];if(!_0x395cc5)return _0x27532e[_0x44eda7(0x1d4)](0x190)[_0x44eda7(0x21f)](_0x44eda7(0x1f6));const _0x37fc94=yield networkTest_1[_0x44eda7(0x1ce)][_0x44eda7(0x1d7)](_0x395cc5);console['log'](_0x37fc94);if(!_0x37fc94)return _0x27532e[_0x44eda7(0x1d4)](0x194)['send']('Test\x20not\x20found');if(_0x37fc94[_0x44eda7(0x216)]){if(!_0x37fc94['ended'])return _0x27532e[_0x44eda7(0x1d4)](0x190)['send']('Cannot\x20deactivate\x20â€”\x20test\x20not\x20ended\x20yet.');const _0x25a2ec=activeTestIntervals['get'](_0x395cc5);return _0x25a2ec&&(clearInterval(_0x25a2ec),activeTestIntervals[_0x44eda7(0x1c3)](_0x395cc5)),_0x37fc94[_0x44eda7(0x216)]=![],_0x37fc94['ended']=!![],_0x37fc94['timeEnded']=new Date(),yield _0x37fc94[_0x44eda7(0x1dd)](),_0x27532e['send'](_0x44eda7(0x1e2));}const _0x2c0a68=yield networkTest_1[_0x44eda7(0x1ce)]['findOne']({'active':!![],'ended':![]});if(_0x2c0a68)return _0x27532e[_0x44eda7(0x1d4)](0x190)[_0x44eda7(0x21f)](_0x44eda7(0x1ca));activeTestIntervals[_0x44eda7(0x1df)](_0x395cc5)&&(clearInterval(activeTestIntervals['get'](_0x395cc5)),activeTestIntervals['delete'](_0x395cc5));yield networkTest_1[_0x44eda7(0x1ce)]['updateOne']({'_id':_0x395cc5},{'$set':{'active':!![],'ended':![],'timeActivated':new Date()}}),_0x37fc94['active']=!![],_0x37fc94['ended']=![],_0x37fc94[_0x44eda7(0x1f1)]=new Date(),yield _0x37fc94[_0x44eda7(0x1dd)]();const _0x45613b=setInterval(()=>{const _0x2ae630=_0x44eda7;checkLastActive(_0x395cc5),console[_0x2ae630(0x21d)]('['+new Date()[_0x2ae630(0x21e)]()+_0x2ae630(0x1ea)+_0x395cc5);},0xa*0x3e8);return activeTestIntervals['set'](_0x395cc5,_0x45613b),_0x27532e[_0x44eda7(0x21f)](_0x44eda7(0x210));}catch(_0x3d6622){console[_0x44eda7(0x1be)](_0x44eda7(0x1e8),_0x3d6622),_0x27532e[_0x44eda7(0x1d4)](0x1f4)[_0x44eda7(0x21f)](_0x44eda7(0x1c4));}});exports['toggleActivation']=toggleActivation;const endNetworkTestForAdmin=(_0x4e3812,_0x1c627f)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x42e5e0=a12_0x3b3a29;var _0x3cad27,_0x2f9c38;try{const _0x56fbb8=_0x4e3812[_0x42e5e0(0x208)]['id'],_0x20cc12=yield networkTest_1[_0x42e5e0(0x1ce)][_0x42e5e0(0x1d7)](_0x56fbb8);if(!_0x20cc12)return _0x1c627f['status'](0x194)[_0x42e5e0(0x21f)](_0x42e5e0(0x1d5));const _0x4c575e=activeTestIntervals[_0x42e5e0(0x1f9)](_0x56fbb8);_0x4c575e&&(clearInterval(_0x4c575e),activeTestIntervals[_0x42e5e0(0x1c3)](_0x56fbb8));const [_0x101a2d,_0x384f09,_0x249e96,_0x2a5c04,_0x18eac0,_0x68b869,_0x1c7949]=yield Promise[_0x42e5e0(0x220)]([networkTestResponse_1[_0x42e5e0(0x1ce)][_0x42e5e0(0x1bf)]({'networkTest':_0x56fbb8}),networkTestResponse_1[_0x42e5e0(0x1ce)][_0x42e5e0(0x1bf)]({'networkTest':_0x56fbb8,'status':_0x42e5e0(0x205)}),networkTestResponse_1['default'][_0x42e5e0(0x1bf)]({'networkTest':_0x56fbb8,'networkLosses':{'$gt':0x0}}),networkTestResponse_1[_0x42e5e0(0x1ce)][_0x42e5e0(0x20c)]([{'$match':{'networkTest':new mongoose_1[(_0x42e5e0(0x1ce))]['Types'][(_0x42e5e0(0x1f7))](_0x56fbb8)}},{'$group':{'_id':null,'total':{'$sum':_0x42e5e0(0x1cf)}}}]),networkTestResponse_1[_0x42e5e0(0x1ce)][_0x42e5e0(0x1bf)]({'networkTest':_0x56fbb8,'status':_0x42e5e0(0x1b9)}),networkTestResponse_1[_0x42e5e0(0x1ce)][_0x42e5e0(0x1bf)]({'networkTest':_0x56fbb8,'status':_0x42e5e0(0x21a)}),networkTestResponse_1[_0x42e5e0(0x1ce)][_0x42e5e0(0x20c)]([{'$match':{'networkTest':new mongoose_1['default']['Types'][(_0x42e5e0(0x1f7))](_0x56fbb8)}},{'$group':{'_id':null,'total':{'$sum':_0x42e5e0(0x1f4)}}}])]);yield networkTest_1[_0x42e5e0(0x1ce)][_0x42e5e0(0x1f3)]({'_id':_0x56fbb8},{'$set':{'active':![],'ended':!![],'timeEnded':new Date(),'totalNetworkLosses':((_0x3cad27=_0x2a5c04[0x0])===null||_0x3cad27===void 0x0?void 0x0:_0x3cad27[_0x42e5e0(0x21b)])||0x0,'computersWithNetworkLosses':_0x249e96,'connectedComputers':_0x101a2d,'endedComputers':_0x18eac0,'lostInTransport':_0x68b869+_0x384f09,'responseThroughput':((((_0x2f9c38=_0x1c7949[0x0])===null||_0x2f9c38===void 0x0?void 0x0:_0x2f9c38['total'])||0x0)/(_0x101a2d*(_0x20cc12===null||_0x20cc12===void 0x0?void 0x0:_0x20cc12[_0x42e5e0(0x1e7)])/0x3e8/0x3c)*0x64)[_0x42e5e0(0x222)](0x2)}}),_0x1c627f['send'](_0x42e5e0(0x204));}catch(_0x41c044){console[_0x42e5e0(0x1be)]('End\x20network\x20test\x20error:',_0x41c044),_0x1c627f[_0x42e5e0(0x1d4)](0x1f4)[_0x42e5e0(0x21f)](_0x42e5e0(0x1ed));}});exports[a12_0x3b3a29(0x215)]=endNetworkTestForAdmin;const networkTestDashboard=(_0x4b3004,_0x1de5a1)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x407657=a12_0x3b3a29;var _0x4029d3,_0x2d2846,_0x20fcb3,_0x2ca5c4,_0x2aec43;try{const _0x2e6cc0=yield networkTest_1['default'][_0x407657(0x1d7)](_0x4b3004[_0x407657(0x208)]['id']);if(!_0x2e6cc0)return _0x1de5a1['status'](0x190)[_0x407657(0x21f)](_0x407657(0x1d5));const [_0x229b32,_0x1eafa6,_0x3c7fb7,_0x15b0e3,_0x4416ad,_0x1808bb,_0x22ac04]=yield Promise[_0x407657(0x220)]([networkTestResponse_1['default'][_0x407657(0x1bf)]({'networkTest':_0x4b3004[_0x407657(0x208)]['id']}),networkTestResponse_1[_0x407657(0x1ce)]['countDocuments']({'networkTest':_0x4b3004[_0x407657(0x208)]['id'],'status':_0x407657(0x205)}),networkTestResponse_1['default'][_0x407657(0x1bf)]({'networkTest':_0x4b3004[_0x407657(0x208)]['id'],'networkLosses':{'$gt':0x0}}),networkTestResponse_1[_0x407657(0x1ce)][_0x407657(0x20c)]([{'$match':{'networkTest':new mongoose_1[(_0x407657(0x1ce))][(_0x407657(0x1c8))][(_0x407657(0x1f7))]((_0x4029d3=_0x4b3004[_0x407657(0x208)]['id'])===null||_0x4029d3===void 0x0?void 0x0:_0x4029d3[_0x407657(0x1eb)]())}},{'$group':{'_id':null,'total':{'$sum':'$networkLosses'}}}]),networkTestResponse_1[_0x407657(0x1ce)]['countDocuments']({'networkTest':_0x4b3004[_0x407657(0x208)]['id'],'status':_0x407657(0x1b9)}),networkTestResponse_1['default']['countDocuments']({'networkTest':_0x4b3004[_0x407657(0x208)]['id'],'status':_0x407657(0x21a)}),networkTestResponse_1[_0x407657(0x1ce)][_0x407657(0x20c)]([{'$match':{'networkTest':new mongoose_1[(_0x407657(0x1ce))]['Types']['ObjectId']((_0x2d2846=_0x4b3004['query']['id'])===null||_0x2d2846===void 0x0?void 0x0:_0x2d2846[_0x407657(0x1eb)]())}},{'$group':{'_id':null,'total':{'$sum':_0x407657(0x1f4)}}}])]);_0x1de5a1[_0x407657(0x21f)]({'totalComputers':_0x229b32,'connected':_0x1eafa6,'computersWithNetworkLosses':_0x3c7fb7,'totalNetworkLosses':((_0x20fcb3=_0x15b0e3[0x0])===null||_0x20fcb3===void 0x0?void 0x0:_0x20fcb3[_0x407657(0x21b)])||0x0,'ended':_0x4416ad,'disconnected':_0x1808bb,'totalResponses':((_0x2ca5c4=_0x22ac04[0x0])===null||_0x2ca5c4===void 0x0?void 0x0:_0x2ca5c4[_0x407657(0x21b)])||0x0,'expected':_0x229b32*(_0x2e6cc0===null||_0x2e6cc0===void 0x0?void 0x0:_0x2e6cc0['duration'])/0x3e8/0x3c,'responseThroughput':((((_0x2aec43=_0x22ac04[0x0])===null||_0x2aec43===void 0x0?void 0x0:_0x2aec43[_0x407657(0x21b)])||0x0)/(_0x229b32*(_0x2e6cc0===null||_0x2e6cc0===void 0x0?void 0x0:_0x2e6cc0[_0x407657(0x1e7)])/0x3e8/0x3c)*0x64)[_0x407657(0x222)](0x2)});}catch(_0x134dc3){_0x1de5a1[_0x407657(0x1d4)](0x1f4)[_0x407657(0x21f)](_0x407657(0x1ed));}});exports['networkTestDashboard']=networkTestDashboard;const computerListUnderNetworkTest=(_0x5a4c42,_0x125ac5)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x4e1eb2=a12_0x3b3a29,_0x37e84e=_0x5a4c42[_0x4e1eb2(0x208)]['page']||0x1,_0x5cf5b8=_0x5a4c42[_0x4e1eb2(0x208)][_0x4e1eb2(0x1bc)]||0x32,_0x42fc8f=yield networkTestResponse_1[_0x4e1eb2(0x1ce)][_0x4e1eb2(0x1ba)]({'networkTest':_0x5a4c42['params']['id']})[_0x4e1eb2(0x212)]('computer')[_0x4e1eb2(0x200)]((_0x37e84e-0x1)*_0x5cf5b8)[_0x4e1eb2(0x1bc)](_0x5cf5b8)['lean'](),_0x211d96=yield networkTestResponse_1[_0x4e1eb2(0x1ce)]['countDocuments']({'networkTest':_0x5a4c42[_0x4e1eb2(0x20a)]['id']}),_0x2e6b53=_0x42fc8f[_0x4e1eb2(0x207)]((_0x2dc54b,_0x472f73)=>{const _0x32aa32=_0x4e1eb2;return Object[_0x32aa32(0x1e1)](Object[_0x32aa32(0x1e1)]({},_0x2dc54b),{'id':(_0x37e84e-0x1)*_0x5cf5b8+_0x472f73+0x1});});_0x125ac5[_0x4e1eb2(0x21f)]({'total':_0x211d96,'computers':_0x2e6b53});});exports[a12_0x3b3a29(0x1e9)]=computerListUnderNetworkTest;function a12_0x8bcf(){const _0x10a9aa=['data','endNetworkTestForAdmin','active','../models/networkTest','lean','networkTestDashboard','disconnected','total','responseThroughput','log','toISOString','send','all','then','toFixed','../models/networkTestResponse','1520256WiyFUb','Internal\x20server\x20error','deleteMany','2409129OpwfIS','ended','find','../models/computerModel','limit','createNetworkTest','error','countDocuments','networkPing','mongoose','Network\x20test\x20not\x20found','delete','Internal\x20server\x20error.','next','73962prVDul','A\x20test\x20is\x20yet\x20to\x20be\x20uploaded','Types','connectedComputers','Another\x20test\x20is\x20currently\x20active\x20and\x20not\x20yet\x20ended.','__awaiter','Network\x20test\x20deleted\x20successfully','viewNetworkTests','default','$networkLosses','../models/centreModel','CentreCapacity','1865490hFUaNc','New\x20network\x20test\x20created','status','Test\x20not\x20found','No\x20computers\x20uploaded','findById','defineProperty','Please\x20end\x20this\x20test\x20before\x20you\x20delete\x20it','193811cNIPSB','uploadNetworkTest','2010573YbuHfJ','save','3142532xdbIUS','has','centre','assign','Test\x20deactivated\x20successfully.','body','./generateId','toggleActivation','page','duration','Toggle\x20activation\x20error:','computerListUnderNetworkTest',']\x20Background\x20check\x20for\x20','toString','examId','Server\x20error','create','findByIdAndDelete','deleteNetworkTest','timeActivated','apply','updateOne','$responses','findOne','Invalid\x20test\x20ID','ObjectId','networktest/uploadtest','get','done','sendStatus','value','now','generateId','__importDefault','skip','totalNetworkLosses','168oApcuz','5oTUdPb','Test\x20ended\x20successfully','connected','_id','map','query','retrieveNetworkTestSummary','params','__esModule','aggregate','Centre\x20not\x20found','Delete\x20network\x20test\x20error:','../httpService','Test\x20activated\x20successfully.','throw','populate','uploaded'];a12_0x8bcf=function(){return _0x10a9aa;};return a12_0x8bcf();}const uploadNetworkTest=(_0x3dd528,_0x55513b)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5823fc=a12_0x3b3a29;var _0xe90085;try{const _0xadcee0=_0x3dd528[_0x5823fc(0x208)]['id'],_0x3c0a5b=yield networkTest_1[_0x5823fc(0x1ce)]['findById'](_0xadcee0),_0x45db93=yield networkTestResponse_1['default']['find']({'networkTest':_0xadcee0}),_0x120c50=yield httpService_1['httpService']['post'](_0x5823fc(0x1f8),{'networkTest':_0x3c0a5b,'responses':_0x45db93},{'params':{'centre':(_0xe90085=_0x3dd528['centre'])===null||_0xe90085===void 0x0?void 0x0:_0xe90085[_0x5823fc(0x206)]['toString']()}});_0x55513b[_0x5823fc(0x1d4)](_0x120c50[_0x5823fc(0x1d4)])[_0x5823fc(0x21f)](_0x120c50[_0x5823fc(0x214)]);}catch(_0x59835e){_0x55513b[_0x5823fc(0x1d4)](0x1f4)[_0x5823fc(0x21f)](_0x5823fc(0x225));}});exports[a12_0x3b3a29(0x1db)]=uploadNetworkTest;const networkPing=(_0x2ec563,_0x2aa2d6)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x47bba1=a12_0x3b3a29,_0x4cfafb=yield networkTest_1[_0x47bba1(0x1ce)][_0x47bba1(0x1f5)]({'active':!![]});if(!_0x4cfafb)return _0x2aa2d6[_0x47bba1(0x1fb)](0x194);_0x2aa2d6['send']('pong');});exports[a12_0x3b3a29(0x1c0)]=networkPing;const retrieveNetworkTestSummary=(_0x5a1087,_0x4038bc)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2afdea=a12_0x3b3a29;try{const _0x47dcf2=yield networkTest_1[_0x2afdea(0x1ce)][_0x2afdea(0x1d7)](_0x5a1087[_0x2afdea(0x208)]['id'])[_0x2afdea(0x218)]();if(!_0x47dcf2)return _0x4038bc[_0x2afdea(0x1d4)](0x190)[_0x2afdea(0x21f)](_0x2afdea(0x1d5));const _0x1bb72b=yield centreModel_1['default'][_0x2afdea(0x1f5)]({})[_0x2afdea(0x218)]();if(!_0x1bb72b)return _0x4038bc[_0x2afdea(0x1d4)](0x190)[_0x2afdea(0x21f)](_0x2afdea(0x20d));const _0x4d2e3a={'testedComputers':_0x47dcf2[_0x2afdea(0x1c9)],'capacity':_0x1bb72b[_0x2afdea(0x1d1)],'capacityMatched':_0x47dcf2[_0x2afdea(0x1c9)]>=_0x1bb72b['CentreCapacity'],'networkLosses':_0x47dcf2[_0x2afdea(0x201)],'networkLossesThreshold':_0x47dcf2[_0x2afdea(0x201)]<0x2d,'duration':_0x47dcf2['duration'],'durationMatched':_0x47dcf2[_0x2afdea(0x1e7)]>=0x3c*0x3c*0x3e8,'responsesPercentage':_0x47dcf2[_0x2afdea(0x21c)],'responsesPercentageMatched':Number(_0x47dcf2['responseThroughput'])>=0x5a,'canUpload':_0x47dcf2[_0x2afdea(0x1c9)]>=_0x1bb72b['CentreCapacity']&&_0x47dcf2[_0x2afdea(0x201)]<0x2d&&_0x47dcf2[_0x2afdea(0x1e7)]>=0x3c*0x3c*0x3e8&&Number(_0x47dcf2[_0x2afdea(0x21c)])>=0x5a};_0x4038bc[_0x2afdea(0x21f)](_0x4d2e3a);}catch(_0x27a56d){_0x4038bc['sendStatus'](0x1f4);}});exports[a12_0x3b3a29(0x209)]=retrieveNetworkTestSummary;