'use strict';const a14_0x59a168=a14_0x45ce;function a14_0x1b00(){const _0x245854=['Computer\x20already\x20registered\x20â€”\x20duplicate\x20','macAddresses','79939JtWVuy','viewComputer','error','centre','70158qlmiAs','MAC\x20address','serial\x20number','httpService','1244313WdwMsY','default','../models/computerModel','8qHRFCw','deleteComputer','some','toString','post','uploadComputers','1663749bQkvPQ','_id','Internal\x20server\x20error','serialNumber','12WoyJLy','skip','countDocuments','viewRegisteredComputers','defineProperty','../httpService','deleteComputers','next','params','processorId','lean','toLowerCase','done','join','viewCleanedComputers','all','1828275bsLrAD','send','length','includes','insertMany','Computer\x20registered\x20successfully','Missing\x20required\x20fields','__awaiter','body','deleteMany','Centre\x20not\x20found','value','data','throw','find','status','getComputers','410wdDOPk','not\x20uploaded','fetchInfractionReports','map','query','2179336XycuRf','assign','uploaded','deleteOne','12RSIczt','limit','../models/centreModel','processor\x20ID','push','__importDefault','registerComputer','page','then','__esModule','45738lgPhDX','findOne'];a14_0x1b00=function(){return _0x245854;};return a14_0x1b00();}(function(_0x54268c,_0x5f0c9a){const _0x4940bc=a14_0x45ce,_0x5df8a6=_0x54268c();while(!![]){try{const _0x19e7c6=-parseInt(_0x4940bc(0x1e4))/0x1*(parseInt(_0x4940bc(0x223))/0x2)+parseInt(_0x4940bc(0x1f5))/0x3+-parseInt(_0x4940bc(0x21f))/0x4+parseInt(_0x4940bc(0x209))/0x5+parseInt(_0x4940bc(0x1f9))/0x6*(-parseInt(_0x4940bc(0x1e0))/0x7)+parseInt(_0x4940bc(0x1ef))/0x8*(parseInt(_0x4940bc(0x1ec))/0x9)+parseInt(_0x4940bc(0x21a))/0xa*(parseInt(_0x4940bc(0x1e8))/0xb);if(_0x19e7c6===_0x5f0c9a)break;else _0x5df8a6['push'](_0x5df8a6['shift']());}catch(_0xe7e93){_0x5df8a6['push'](_0x5df8a6['shift']());}}}(a14_0x1b00,0x44f59));var __awaiter=this&&this[a14_0x59a168(0x210)]||function(_0x2aec17,_0x34620a,_0x26e5f7,_0x482500){function _0x535a97(_0x2e53ab){return _0x2e53ab instanceof _0x26e5f7?_0x2e53ab:new _0x26e5f7(function(_0x43a9e5){_0x43a9e5(_0x2e53ab);});}return new(_0x26e5f7||(_0x26e5f7=Promise))(function(_0x2d091c,_0x380256){const _0x35a0ea=a14_0x45ce;function _0xb265f6(_0x546ec5){try{_0x33e27b(_0x482500['next'](_0x546ec5));}catch(_0x34b388){_0x380256(_0x34b388);}}function _0x2058b3(_0x54a808){const _0x265b19=a14_0x45ce;try{_0x33e27b(_0x482500[_0x265b19(0x216)](_0x54a808));}catch(_0x554d5b){_0x380256(_0x554d5b);}}function _0x33e27b(_0x3be32b){const _0x229eb0=a14_0x45ce;_0x3be32b[_0x229eb0(0x205)]?_0x2d091c(_0x3be32b[_0x229eb0(0x214)]):_0x535a97(_0x3be32b[_0x229eb0(0x214)])[_0x229eb0(0x1de)](_0xb265f6,_0x2058b3);}_0x33e27b((_0x482500=_0x482500['apply'](_0x2aec17,_0x34620a||[]))[_0x35a0ea(0x200)]());});},__importDefault=this&&this[a14_0x59a168(0x1db)]||function(_0x113554){const _0x2111b2=a14_0x59a168;return _0x113554&&_0x113554[_0x2111b2(0x1df)]?_0x113554:{'default':_0x113554};};Object[a14_0x59a168(0x1fd)](exports,a14_0x59a168(0x1df),{'value':!![]}),exports[a14_0x59a168(0x1e5)]=exports['viewCleanedComputers']=exports['deleteComputer']=exports[a14_0x59a168(0x219)]=exports[a14_0x59a168(0x21c)]=exports['deleteComputers']=exports[a14_0x59a168(0x1f4)]=exports[a14_0x59a168(0x1fc)]=exports[a14_0x59a168(0x1dc)]=void 0x0;const computerModel_1=__importDefault(require(a14_0x59a168(0x1ee))),centreModel_1=__importDefault(require(a14_0x59a168(0x1d8))),httpService_1=require(a14_0x59a168(0x1fe)),registerComputer=(_0x588058,_0x22d2b5)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x87c363=a14_0x59a168;var _0x22c94f,_0x52499b;try{const _0x298312=yield centreModel_1[_0x87c363(0x1ed)][_0x87c363(0x1e1)]();if(!_0x298312)return _0x22d2b5['status'](0x190)[_0x87c363(0x20a)](_0x87c363(0x213));const _0x22194d=_0x588058[_0x87c363(0x211)];if(!_0x22194d[_0x87c363(0x1f8)]||!_0x22194d[_0x87c363(0x202)]||!_0x22194d[_0x87c363(0x1e3)]||_0x22194d['macAddresses'][_0x87c363(0x20b)]===0x0)return _0x22d2b5[_0x87c363(0x218)](0x190)[_0x87c363(0x20a)](_0x87c363(0x20f));const _0x275d3f=(_0x22c94f=_0x22194d['serialNumber'])===null||_0x22c94f===void 0x0?void 0x0:_0x22c94f['toLowerCase'](),_0x4c4ee1=(_0x52499b=_0x22194d[_0x87c363(0x202)])===null||_0x52499b===void 0x0?void 0x0:_0x52499b['toLowerCase'](),_0x59706e=(_0x22194d[_0x87c363(0x1e3)]||[])[_0x87c363(0x21d)](_0x160d0f=>_0x160d0f[_0x87c363(0x204)]()),_0x143247=yield computerModel_1[_0x87c363(0x1ed)]['findOne']({'$and':[{'serialNumber':_0x275d3f},{'processorId':_0x4c4ee1},{'macAddresses':{'$in':_0x59706e}}]});if(_0x143247){let _0x220445=[];if(_0x143247[_0x87c363(0x1f8)]===_0x275d3f)_0x220445[_0x87c363(0x1da)](_0x87c363(0x1ea));if(_0x143247['processorId']===_0x4c4ee1)_0x220445[_0x87c363(0x1da)](_0x87c363(0x1d9));if(_0x143247[_0x87c363(0x1e3)][_0x87c363(0x1f1)](_0x1e2057=>_0x59706e[_0x87c363(0x20c)](_0x1e2057)))_0x220445['push'](_0x87c363(0x1e9));return _0x22d2b5['status'](0x190)[_0x87c363(0x20a)](_0x87c363(0x1e2)+_0x220445[_0x87c363(0x206)](',\x20')+'.');}const _0xdbcc64=new computerModel_1[(_0x87c363(0x1ed))](Object[_0x87c363(0x220)](Object[_0x87c363(0x220)]({},_0x22194d),{'serialNumber':_0x275d3f,'processorId':_0x4c4ee1,'macAddresses':_0x59706e,'centre':_0x298312[_0x87c363(0x1f6)]}));yield _0xdbcc64['save'](),_0x22d2b5['send'](_0x87c363(0x20e));}catch(_0x149574){console[_0x87c363(0x1e6)](_0x149574),_0x22d2b5['status'](0x1f4)[_0x87c363(0x20a)](_0x87c363(0x1f7));}});exports[a14_0x59a168(0x1dc)]=registerComputer;const viewRegisteredComputers=(_0x32af51,_0x6b9b17)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x383b76=a14_0x59a168,_0x1d870c=_0x32af51[_0x383b76(0x21e)][_0x383b76(0x1dd)]||0x1,_0x46e9bf=_0x32af51['query'][_0x383b76(0x224)]||0x32,_0x43d24b=yield computerModel_1[_0x383b76(0x1ed)][_0x383b76(0x217)]({})[_0x383b76(0x1fa)]((_0x1d870c-0x1)*_0x46e9bf)['limit'](_0x46e9bf)[_0x383b76(0x203)](),[_0x2976ad,_0x2bb698,_0x3e04ce,_0x3ddf26,_0x1d0d57]=yield Promise[_0x383b76(0x208)]([computerModel_1[_0x383b76(0x1ed)][_0x383b76(0x1fb)](),computerModel_1[_0x383b76(0x1ed)]['countDocuments']({'flagged':![]}),computerModel_1[_0x383b76(0x1ed)]['countDocuments']({'flagged':!![]}),computerModel_1['default']['countDocuments']({'status':_0x383b76(0x221)}),computerModel_1[_0x383b76(0x1ed)]['countDocuments']({'status':_0x383b76(0x21b)})]),_0x2307ed=_0x43d24b[_0x383b76(0x21d)]((_0x3ee8e8,_0x1b7df8)=>{const _0x4ebfa0=_0x383b76;return Object['assign'](Object[_0x4ebfa0(0x220)]({},_0x3ee8e8),{'id':(_0x1d870c-0x1)*_0x46e9bf+_0x1b7df8+0x1});});_0x6b9b17[_0x383b76(0x20a)]({'total':_0x2976ad,'totalComputers':_0x2307ed,'cleanComputers':_0x2bb698,'infractions':_0x3e04ce,'uploaded':_0x3ddf26,'notUploaded':_0x1d0d57});});exports['viewRegisteredComputers']=viewRegisteredComputers;const uploadComputers=(_0x53d2ce,_0x4a7c5c)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x527eba=a14_0x59a168;var _0x8fb292;const _0x4cf4d8=yield computerModel_1[_0x527eba(0x1ed)]['find']({'status':_0x527eba(0x21b)}),_0x5110ee=yield httpService_1[_0x527eba(0x1eb)][_0x527eba(0x1f3)]('centre/uploadcomputer',{'computers':_0x4cf4d8,'centreId':(_0x8fb292=_0x53d2ce[_0x527eba(0x1e7)])===null||_0x8fb292===void 0x0?void 0x0:_0x8fb292[_0x527eba(0x1f6)][_0x527eba(0x1f2)]()});_0x4a7c5c[_0x527eba(0x218)](_0x5110ee[_0x527eba(0x218)])[_0x527eba(0x20a)](_0x5110ee[_0x527eba(0x215)]);});exports['uploadComputers']=uploadComputers;const deleteComputers=()=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){});exports[a14_0x59a168(0x1ff)]=deleteComputers;const fetchInfractionReports=(_0xb4e856,_0x571723)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5c37f0=a14_0x59a168;var _0x1cb10c;const _0xf701ea=yield httpService_1[_0x5c37f0(0x1eb)]['get']('centre/infractions',{'headers':{'centreid':(_0x1cb10c=_0xb4e856[_0x5c37f0(0x1e7)])===null||_0x1cb10c===void 0x0?void 0x0:_0x1cb10c['_id']['toString']()},'params':{'page':_0xb4e856[_0x5c37f0(0x21e)][_0x5c37f0(0x1dd)]||0x1,'limit':_0xb4e856[_0x5c37f0(0x21e)][_0x5c37f0(0x224)]||0x32}});_0x571723[_0x5c37f0(0x218)](_0xf701ea[_0x5c37f0(0x218)])[_0x5c37f0(0x20a)](_0xf701ea['data']);});function a14_0x45ce(_0x4e9f6b,_0x4a3485){const _0x1b0014=a14_0x1b00();return a14_0x45ce=function(_0x45ce54,_0x1ac1a5){_0x45ce54=_0x45ce54-0x1d8;let _0x3580e2=_0x1b0014[_0x45ce54];return _0x3580e2;},a14_0x45ce(_0x4e9f6b,_0x4a3485);}exports['fetchInfractionReports']=fetchInfractionReports;const getComputers=(_0x244e4b,_0x53f5c0)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x23a682=a14_0x59a168;var _0x16d290;try{const _0x92bf19=yield httpService_1[_0x23a682(0x1eb)]['get']('centre/centrecomputers',{'params':{'centre':(_0x16d290=_0x244e4b[_0x23a682(0x1e7)])===null||_0x16d290===void 0x0?void 0x0:_0x16d290[_0x23a682(0x1f6)][_0x23a682(0x1f2)]()}});if(_0x92bf19[_0x23a682(0x218)]===0xc8)yield computerModel_1['default'][_0x23a682(0x212)](),yield computerModel_1[_0x23a682(0x1ed)][_0x23a682(0x20d)](_0x92bf19[_0x23a682(0x215)]),_0x53f5c0['send']('New\x20computers\x20imported');else _0x53f5c0[_0x23a682(0x218)](_0x92bf19[_0x23a682(0x218)])[_0x23a682(0x20a)]('Could\x20not\x20import\x20new\x20computers');}catch(_0x347e12){console[_0x23a682(0x1e6)](_0x347e12),_0x53f5c0[_0x23a682(0x218)](0x1f4)['send']('Internal\x20server\x20error');}});exports[a14_0x59a168(0x219)]=getComputers;const deleteComputer=(_0x8a7503,_0x3f777f)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1ffd7b=a14_0x59a168;yield computerModel_1[_0x1ffd7b(0x1ed)][_0x1ffd7b(0x222)]({'_id':_0x8a7503[_0x1ffd7b(0x201)]['id']}),_0x3f777f['send']('Computer\x20deleted');});exports[a14_0x59a168(0x1f0)]=deleteComputer;const viewCleanedComputers=(_0x2ae730,_0x57af25)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x3925dd=a14_0x59a168,_0x15b893=yield computerModel_1[_0x3925dd(0x1ed)][_0x3925dd(0x217)]({'flagged':![]})[_0x3925dd(0x203)]();_0x57af25[_0x3925dd(0x20a)](_0x15b893);});exports[a14_0x59a168(0x207)]=viewCleanedComputers;const viewComputer=(_0x27292b,_0x5bd980)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x3bfef7=a14_0x59a168,_0x3cf714=yield computerModel_1[_0x3bfef7(0x1ed)]['findById'](_0x27292b[_0x3bfef7(0x201)]['id'])['lean'](),_0x57bafa=_0x27292b['ip'];_0x5bd980['send'](Object[_0x3bfef7(0x220)](Object[_0x3bfef7(0x220)]({},_0x3cf714),{'ip':_0x57bafa}));});exports[a14_0x59a168(0x1e5)]=viewComputer;