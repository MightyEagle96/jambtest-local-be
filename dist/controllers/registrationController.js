'use strict';const a12_0x458ff6=a12_0x1bfc;(function(_0x2f7131,_0x31f0b3){const _0x2e0781=a12_0x1bfc,_0x15953=_0x2f7131();while(!![]){try{const _0x4d51e8=parseInt(_0x2e0781(0x153))/0x1+-parseInt(_0x2e0781(0x179))/0x2+-parseInt(_0x2e0781(0x162))/0x3+parseInt(_0x2e0781(0x142))/0x4+parseInt(_0x2e0781(0x177))/0x5*(parseInt(_0x2e0781(0x183))/0x6)+parseInt(_0x2e0781(0x170))/0x7*(-parseInt(_0x2e0781(0x149))/0x8)+parseInt(_0x2e0781(0x13c))/0x9;if(_0x4d51e8===_0x31f0b3)break;else _0x15953['push'](_0x15953['shift']());}catch(_0x11fcf0){_0x15953['push'](_0x15953['shift']());}}}(a12_0x581e,0x8f343));var __awaiter=this&&this[a12_0x458ff6(0x15c)]||function(_0x565f0e,_0x2bf404,_0xae0e8b,_0x2072be){function _0x2f2b1a(_0x101fbe){return _0x101fbe instanceof _0xae0e8b?_0x101fbe:new _0xae0e8b(function(_0x2c5907){_0x2c5907(_0x101fbe);});}return new(_0xae0e8b||(_0xae0e8b=Promise))(function(_0x567cd8,_0x818dc0){function _0x532137(_0x4c9394){try{_0x19a81c(_0x2072be['next'](_0x4c9394));}catch(_0xf0d389){_0x818dc0(_0xf0d389);}}function _0x2b4207(_0x17c53e){const _0x36505c=a12_0x1bfc;try{_0x19a81c(_0x2072be[_0x36505c(0x16a)](_0x17c53e));}catch(_0xca5822){_0x818dc0(_0xca5822);}}function _0x19a81c(_0x2a7396){const _0x56ae6d=a12_0x1bfc;_0x2a7396[_0x56ae6d(0x163)]?_0x567cd8(_0x2a7396[_0x56ae6d(0x176)]):_0x2f2b1a(_0x2a7396[_0x56ae6d(0x176)])[_0x56ae6d(0x15e)](_0x532137,_0x2b4207);}_0x19a81c((_0x2072be=_0x2072be['apply'](_0x565f0e,_0x2bf404||[]))['next']());});},__importDefault=this&&this[a12_0x458ff6(0x14b)]||function(_0x3c6af6){const _0x11f8d7=a12_0x458ff6;return _0x3c6af6&&_0x3c6af6[_0x11f8d7(0x155)]?_0x3c6af6:{'default':_0x3c6af6};};Object[a12_0x458ff6(0x17e)](exports,a12_0x458ff6(0x155),{'value':!![]}),exports[a12_0x458ff6(0x17d)]=exports[a12_0x458ff6(0x180)]=exports[a12_0x458ff6(0x17a)]=exports['getComputers']=exports[a12_0x458ff6(0x141)]=exports[a12_0x458ff6(0x168)]=exports[a12_0x458ff6(0x152)]=exports[a12_0x458ff6(0x158)]=exports[a12_0x458ff6(0x13e)]=void 0x0;const computerModel_1=__importDefault(require(a12_0x458ff6(0x15d))),centreModel_1=__importDefault(require(a12_0x458ff6(0x15b))),httpService_1=require('../httpService'),registerComputer=(_0x30ad4b,_0x5b1ad0)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x3713ad=a12_0x458ff6;var _0x784ccb,_0x221d76;try{const _0x5b6ece=yield centreModel_1[_0x3713ad(0x17f)][_0x3713ad(0x16c)]();if(!_0x5b6ece)return _0x5b1ad0['status'](0x190)[_0x3713ad(0x154)](_0x3713ad(0x150));const _0x3bddfa=_0x30ad4b[_0x3713ad(0x144)];if(!_0x3bddfa['serialNumber']||!_0x3bddfa[_0x3713ad(0x15f)]||!_0x3bddfa[_0x3713ad(0x160)]||_0x3bddfa[_0x3713ad(0x160)][_0x3713ad(0x159)]===0x0)return _0x5b1ad0[_0x3713ad(0x14e)](0x190)[_0x3713ad(0x154)](_0x3713ad(0x166));const _0x5c876f=(_0x784ccb=_0x3bddfa['serialNumber'])===null||_0x784ccb===void 0x0?void 0x0:_0x784ccb[_0x3713ad(0x145)](),_0x854f6e=(_0x221d76=_0x3bddfa[_0x3713ad(0x15f)])===null||_0x221d76===void 0x0?void 0x0:_0x221d76[_0x3713ad(0x145)](),_0xfab911=(_0x3bddfa[_0x3713ad(0x160)]||[])[_0x3713ad(0x171)](_0x33c01b=>_0x33c01b[_0x3713ad(0x145)]()),_0x526a4a=yield computerModel_1[_0x3713ad(0x17f)]['findOne']({'$and':[{'serialNumber':_0x5c876f},{'processorId':_0x854f6e},{'macAddresses':{'$in':_0xfab911}}]});if(_0x526a4a){let _0x4314f3=[];if(_0x526a4a[_0x3713ad(0x17b)]===_0x5c876f)_0x4314f3[_0x3713ad(0x164)](_0x3713ad(0x147));if(_0x526a4a['processorId']===_0x854f6e)_0x4314f3[_0x3713ad(0x164)](_0x3713ad(0x182));if(_0x526a4a['macAddresses'][_0x3713ad(0x167)](_0xbe0d8c=>_0xfab911['includes'](_0xbe0d8c)))_0x4314f3[_0x3713ad(0x164)](_0x3713ad(0x15a));return _0x5b1ad0[_0x3713ad(0x14e)](0x190)[_0x3713ad(0x154)](_0x3713ad(0x140)+_0x4314f3['join'](',\x20')+'.');}const _0x1bd7b4=new computerModel_1['default'](Object['assign'](Object[_0x3713ad(0x174)]({},_0x3bddfa),{'serialNumber':_0x5c876f,'processorId':_0x854f6e,'macAddresses':_0xfab911,'centre':_0x5b6ece[_0x3713ad(0x172)]}));yield _0x1bd7b4[_0x3713ad(0x181)](),_0x5b1ad0[_0x3713ad(0x154)]('Computer\x20registered\x20successfully');}catch(_0x1154cd){console['error'](_0x1154cd),_0x5b1ad0[_0x3713ad(0x14e)](0x1f4)[_0x3713ad(0x154)]('Internal\x20server\x20error');}});exports[a12_0x458ff6(0x13e)]=registerComputer;const viewRegisteredComputers=(_0x378783,_0x23f474)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x6b8634=a12_0x458ff6,_0x21ddee=_0x378783[_0x6b8634(0x161)][_0x6b8634(0x13b)]||0x1,_0x125e42=_0x378783[_0x6b8634(0x161)][_0x6b8634(0x14c)]||0x32,_0x5f0ca1=yield computerModel_1[_0x6b8634(0x17f)]['find']({})[_0x6b8634(0x14d)]((_0x21ddee-0x1)*_0x125e42)['limit'](_0x125e42)[_0x6b8634(0x16f)](),[_0x409039,_0x2add9c,_0x5ee854,_0x12c060,_0x29e22d]=yield Promise[_0x6b8634(0x17c)]([computerModel_1[_0x6b8634(0x17f)][_0x6b8634(0x14f)](),computerModel_1[_0x6b8634(0x17f)]['countDocuments']({'flagged':![]}),computerModel_1[_0x6b8634(0x17f)][_0x6b8634(0x14f)]({'flagged':!![]}),computerModel_1[_0x6b8634(0x17f)][_0x6b8634(0x14f)]({'status':'uploaded'}),computerModel_1['default'][_0x6b8634(0x14f)]({'status':_0x6b8634(0x14a)})]),_0x45f223=_0x5f0ca1[_0x6b8634(0x171)]((_0x43f563,_0x247612)=>{const _0x405a9f=_0x6b8634;return Object[_0x405a9f(0x174)](Object[_0x405a9f(0x174)]({},_0x43f563),{'id':(_0x21ddee-0x1)*_0x125e42+_0x247612+0x1});});_0x23f474['send']({'total':_0x409039,'totalComputers':_0x45f223,'cleanComputers':_0x2add9c,'infractions':_0x5ee854,'uploaded':_0x12c060,'notUploaded':_0x29e22d});});exports[a12_0x458ff6(0x158)]=viewRegisteredComputers;const uploadComputers=(_0x4bf884,_0xe4cf6)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1a2b65=a12_0x458ff6;var _0x1e1dd8;const _0x54792d=yield computerModel_1[_0x1a2b65(0x17f)][_0x1a2b65(0x13f)]({'status':'not\x20uploaded'}),_0x1d7bc5=yield httpService_1[_0x1a2b65(0x16d)]['post'](_0x1a2b65(0x175),{'computers':_0x54792d,'centreId':(_0x1e1dd8=_0x4bf884[_0x1a2b65(0x16e)])===null||_0x1e1dd8===void 0x0?void 0x0:_0x1e1dd8[_0x1a2b65(0x172)]['toString']()});_0xe4cf6[_0x1a2b65(0x14e)](_0x1d7bc5[_0x1a2b65(0x14e)])[_0x1a2b65(0x154)](_0x1d7bc5[_0x1a2b65(0x148)]);});exports[a12_0x458ff6(0x152)]=uploadComputers;const deleteComputers=()=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){});exports[a12_0x458ff6(0x168)]=deleteComputers;const fetchInfractionReports=(_0x3e5c2d,_0x126842)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0xdde6d3=a12_0x458ff6;var _0x12314c;const _0x47bbdd=yield httpService_1[_0xdde6d3(0x16d)][_0xdde6d3(0x165)](_0xdde6d3(0x16b),{'headers':{'centreid':(_0x12314c=_0x3e5c2d['centre'])===null||_0x12314c===void 0x0?void 0x0:_0x12314c[_0xdde6d3(0x172)][_0xdde6d3(0x156)]()},'params':{'page':_0x3e5c2d['query'][_0xdde6d3(0x13b)]||0x1,'limit':_0x3e5c2d['query'][_0xdde6d3(0x14c)]||0x32}});_0x126842[_0xdde6d3(0x14e)](_0x47bbdd[_0xdde6d3(0x14e)])[_0xdde6d3(0x154)](_0x47bbdd['data']);});exports[a12_0x458ff6(0x141)]=fetchInfractionReports;const getComputers=(_0x380357,_0x56fddd)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x135b67=a12_0x458ff6;var _0x9f5516;try{const _0x57bf82=yield httpService_1[_0x135b67(0x16d)][_0x135b67(0x165)]('centre/centrecomputers',{'params':{'centre':(_0x9f5516=_0x380357[_0x135b67(0x16e)])===null||_0x9f5516===void 0x0?void 0x0:_0x9f5516[_0x135b67(0x172)][_0x135b67(0x156)]()}});console[_0x135b67(0x143)](_0x57bf82['data']);if(_0x57bf82[_0x135b67(0x14e)]===0xc8)yield computerModel_1['default']['deleteMany'](),yield computerModel_1[_0x135b67(0x17f)]['insertMany'](_0x57bf82['data']),_0x56fddd[_0x135b67(0x154)](_0x135b67(0x146));else _0x56fddd[_0x135b67(0x14e)](_0x57bf82[_0x135b67(0x14e)])[_0x135b67(0x154)](_0x135b67(0x169));}catch(_0x277e57){console[_0x135b67(0x178)](_0x277e57),_0x56fddd['status'](0x1f4)[_0x135b67(0x154)]('Internal\x20server\x20error');}});exports['getComputers']=getComputers;const deleteComputer=(_0x840be2,_0x3fc3d1)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1f122c=a12_0x458ff6;yield computerModel_1['default'][_0x1f122c(0x157)]({'_id':_0x840be2[_0x1f122c(0x13d)]['id']}),_0x3fc3d1[_0x1f122c(0x154)](_0x1f122c(0x173));});exports[a12_0x458ff6(0x17a)]=deleteComputer;function a12_0x1bfc(_0x3db4c0,_0xe2c49b){const _0x581e85=a12_0x581e();return a12_0x1bfc=function(_0x1bfcf8,_0x3e0406){_0x1bfcf8=_0x1bfcf8-0x13b;let _0x116ae7=_0x581e85[_0x1bfcf8];return _0x116ae7;},a12_0x1bfc(_0x3db4c0,_0xe2c49b);}const viewCleanedComputers=(_0xdc6777,_0x38f462)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x32b513=a12_0x458ff6,_0x1a7de8=yield computerModel_1[_0x32b513(0x17f)]['find']({'flagged':![]})[_0x32b513(0x16f)]();_0x38f462[_0x32b513(0x154)](_0x1a7de8);});exports['viewCleanedComputers']=viewCleanedComputers;function a12_0x581e(){const _0x26ec94=['status','countDocuments','Centre\x20not\x20found','findById','uploadComputers','564120zrAPlc','send','__esModule','toString','deleteOne','viewRegisteredComputers','length','MAC\x20address','../models/centreModel','__awaiter','../models/computerModel','then','processorId','macAddresses','query','3165891kILJgH','done','push','get','Missing\x20required\x20fields','some','deleteComputers','Could\x20not\x20import\x20new\x20computers','throw','centre/infractions','findOne','httpService','centre','lean','7tRhkSO','map','_id','Computer\x20deleted','assign','centre/uploadcomputer','value','5698985poYmTS','error','2100446CXQaUY','deleteComputer','serialNumber','all','viewComputer','defineProperty','default','viewCleanedComputers','save','processor\x20ID','6PKpWgi','page','12461715hsRpgE','params','registerComputer','find','Computer\x20already\x20registered\x20â€”\x20duplicate\x20','fetchInfractionReports','1810404RwBGeX','log','body','toLowerCase','New\x20computers\x20imported','serial\x20number','data','6792560wqeIcy','not\x20uploaded','__importDefault','limit','skip'];a12_0x581e=function(){return _0x26ec94;};return a12_0x581e();}const viewComputer=(_0x448331,_0x454243)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5672de=a12_0x458ff6,_0x3fa58d=yield computerModel_1[_0x5672de(0x17f)][_0x5672de(0x151)](_0x448331[_0x5672de(0x13d)]['id'])['lean'](),_0x16779c=_0x448331['ip'];_0x454243['send'](Object[_0x5672de(0x174)](Object[_0x5672de(0x174)]({},_0x3fa58d),{'ip':_0x16779c}));});exports['viewComputer']=viewComputer;