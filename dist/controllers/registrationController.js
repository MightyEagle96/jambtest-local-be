'use strict';const a13_0xb37d66=a13_0x1a66;(function(_0x53961c,_0x4c8629){const _0x34d0dd=a13_0x1a66,_0x51266b=_0x53961c();while(!![]){try{const _0x429a9d=parseInt(_0x34d0dd(0x195))/0x1+parseInt(_0x34d0dd(0x1ac))/0x2*(-parseInt(_0x34d0dd(0x197))/0x3)+parseInt(_0x34d0dd(0x19c))/0x4+parseInt(_0x34d0dd(0x186))/0x5+parseInt(_0x34d0dd(0x1b7))/0x6*(-parseInt(_0x34d0dd(0x199))/0x7)+parseInt(_0x34d0dd(0x182))/0x8+parseInt(_0x34d0dd(0x19b))/0x9*(-parseInt(_0x34d0dd(0x185))/0xa);if(_0x429a9d===_0x4c8629)break;else _0x51266b['push'](_0x51266b['shift']());}catch(_0x3356e3){_0x51266b['push'](_0x51266b['shift']());}}}(a13_0x4729,0x27a9d));var __awaiter=this&&this[a13_0xb37d66(0x1b9)]||function(_0x466d65,_0x104939,_0x4a5b79,_0x369aff){function _0x2de537(_0x3630e6){return _0x3630e6 instanceof _0x4a5b79?_0x3630e6:new _0x4a5b79(function(_0x2c87be){_0x2c87be(_0x3630e6);});}return new(_0x4a5b79||(_0x4a5b79=Promise))(function(_0x540b72,_0x591598){const _0xa4c931=a13_0x1a66;function _0x1ef212(_0x7e6d07){try{_0x2bf7b7(_0x369aff['next'](_0x7e6d07));}catch(_0x51abe7){_0x591598(_0x51abe7);}}function _0x4fd65e(_0x23de55){const _0x5c67c4=a13_0x1a66;try{_0x2bf7b7(_0x369aff[_0x5c67c4(0x189)](_0x23de55));}catch(_0x46880d){_0x591598(_0x46880d);}}function _0x2bf7b7(_0x235072){const _0x344045=a13_0x1a66;_0x235072[_0x344045(0x1a5)]?_0x540b72(_0x235072[_0x344045(0x1c8)]):_0x2de537(_0x235072[_0x344045(0x1c8)])[_0x344045(0x1b5)](_0x1ef212,_0x4fd65e);}_0x2bf7b7((_0x369aff=_0x369aff[_0xa4c931(0x1b6)](_0x466d65,_0x104939||[]))[_0xa4c931(0x198)]());});},__importDefault=this&&this[a13_0xb37d66(0x183)]||function(_0x5a88ef){const _0x10bc13=a13_0xb37d66;return _0x5a88ef&&_0x5a88ef[_0x10bc13(0x1ab)]?_0x5a88ef:{'default':_0x5a88ef};};Object[a13_0xb37d66(0x1a3)](exports,a13_0xb37d66(0x1ab),{'value':!![]}),exports[a13_0xb37d66(0x1af)]=exports[a13_0xb37d66(0x196)]=exports['deleteComputer']=exports['getComputers']=exports['fetchInfractionReports']=exports[a13_0xb37d66(0x1c4)]=exports['uploadComputers']=exports[a13_0xb37d66(0x191)]=exports['registerComputer']=void 0x0;const computerModel_1=__importDefault(require(a13_0xb37d66(0x190))),centreModel_1=__importDefault(require(a13_0xb37d66(0x1c5))),appNetwork_1=require('../appNetwork'),registerComputer=(_0x2bc708,_0x3d1cd1)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x345120=a13_0xb37d66;var _0x44fba0,_0xe2fd4d;try{const _0x17350b=yield centreModel_1[_0x345120(0x1c1)]['findOne']();if(!_0x17350b)return _0x3d1cd1['status'](0x190)[_0x345120(0x180)](_0x345120(0x1a4));const _0x2127f8=_0x2bc708[_0x345120(0x1aa)];if(!_0x2127f8[_0x345120(0x1c9)]||!_0x2127f8[_0x345120(0x1a2)]||!_0x2127f8[_0x345120(0x1c0)]||_0x2127f8['macAddresses']['length']===0x0)return _0x3d1cd1[_0x345120(0x1b3)](0x190)[_0x345120(0x180)](_0x345120(0x1c2));const _0x50709e=(_0x44fba0=_0x2127f8[_0x345120(0x1c9)])===null||_0x44fba0===void 0x0?void 0x0:_0x44fba0['toLowerCase'](),_0x5d8abb=(_0xe2fd4d=_0x2127f8[_0x345120(0x1a2)])===null||_0xe2fd4d===void 0x0?void 0x0:_0xe2fd4d[_0x345120(0x19a)](),_0x309431=(_0x2127f8[_0x345120(0x1c0)]||[])[_0x345120(0x18a)](_0x46204f=>_0x46204f[_0x345120(0x19a)]()),_0x5911d7=yield computerModel_1['default'][_0x345120(0x1a0)]({'$and':[{'serialNumber':_0x50709e},{'processorId':_0x5d8abb},{'macAddresses':{'$in':_0x309431}}]});if(_0x5911d7){let _0x25ecf1=[];if(_0x5911d7[_0x345120(0x1c9)]===_0x50709e)_0x25ecf1['push'](_0x345120(0x1a8));if(_0x5911d7[_0x345120(0x1a2)]===_0x5d8abb)_0x25ecf1[_0x345120(0x1b4)](_0x345120(0x1a7));if(_0x5911d7['macAddresses'][_0x345120(0x1b2)](_0x5f4005=>_0x309431[_0x345120(0x1a1)](_0x5f4005)))_0x25ecf1[_0x345120(0x1b4)](_0x345120(0x18c));return _0x3d1cd1[_0x345120(0x1b3)](0x190)[_0x345120(0x180)](_0x345120(0x18d)+_0x25ecf1['join'](',\x20')+'.');}const _0x26074d=new computerModel_1['default'](Object['assign'](Object[_0x345120(0x1be)]({},_0x2127f8),{'serialNumber':_0x50709e,'processorId':_0x5d8abb,'macAddresses':_0x309431,'centre':_0x17350b[_0x345120(0x1bb)]}));yield _0x26074d['save'](),_0x3d1cd1[_0x345120(0x180)]('Computer\x20registered\x20successfully');}catch(_0x4fe672){console[_0x345120(0x18e)](_0x4fe672),_0x3d1cd1[_0x345120(0x1b3)](0x1f4)['send'](_0x345120(0x1b0));}});exports[a13_0xb37d66(0x194)]=registerComputer;const viewRegisteredComputers=(_0x463a51,_0x849b76)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x325922=a13_0xb37d66,_0x2f967c=_0x463a51['query']['page']||0x1,_0x183d39=_0x463a51[_0x325922(0x193)][_0x325922(0x1c6)]||0x32,_0x29319d=yield computerModel_1[_0x325922(0x1c1)][_0x325922(0x1ad)]({})[_0x325922(0x18f)]((_0x2f967c-0x1)*_0x183d39)[_0x325922(0x1c6)](_0x183d39)['lean'](),[_0x346c4e,_0x20a505,_0x2439e6,_0x51cbd4,_0x58c689]=yield Promise[_0x325922(0x1ba)]([computerModel_1['default'][_0x325922(0x1bc)](),computerModel_1[_0x325922(0x1c1)][_0x325922(0x1bc)]({'flagged':![]}),computerModel_1[_0x325922(0x1c1)]['countDocuments']({'flagged':!![]}),computerModel_1[_0x325922(0x1c1)][_0x325922(0x1bc)]({'status':_0x325922(0x181)}),computerModel_1[_0x325922(0x1c1)]['countDocuments']({'status':_0x325922(0x1b1)})]),_0x163a59=_0x29319d[_0x325922(0x18a)]((_0x49a73d,_0x1bc54c)=>{const _0x55d790=_0x325922;return Object[_0x55d790(0x1be)](Object[_0x55d790(0x1be)]({},_0x49a73d),{'id':(_0x2f967c-0x1)*_0x183d39+_0x1bc54c+0x1});});_0x849b76['send']({'total':_0x346c4e,'totalComputers':_0x163a59,'cleanComputers':_0x20a505,'infractions':_0x2439e6,'uploaded':_0x51cbd4,'notUploaded':_0x58c689});});exports['viewRegisteredComputers']=viewRegisteredComputers;const uploadComputers=(_0x10ce0b,_0xa4ace6)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x56bfae=a13_0xb37d66;var _0x33bf80;const _0x2c01ae=yield computerModel_1[_0x56bfae(0x1c1)][_0x56bfae(0x1ad)]({'status':'not\x20uploaded'}),_0x105ce9=yield appNetwork_1['httpService'][_0x56bfae(0x184)](_0x56bfae(0x187),{'computers':_0x2c01ae,'centreId':(_0x33bf80=_0x10ce0b[_0x56bfae(0x1bd)])===null||_0x33bf80===void 0x0?void 0x0:_0x33bf80[_0x56bfae(0x1bb)]['toString']()});_0xa4ace6[_0x56bfae(0x1b3)](_0x105ce9[_0x56bfae(0x1b3)])[_0x56bfae(0x180)](_0x105ce9[_0x56bfae(0x1ae)]);});function a13_0x1a66(_0x1ad688,_0x4d38c1){const _0x4729bc=a13_0x4729();return a13_0x1a66=function(_0x1a660b,_0x9b85ee){_0x1a660b=_0x1a660b-0x180;let _0x2ab2dc=_0x4729bc[_0x1a660b];return _0x2ab2dc;},a13_0x1a66(_0x1ad688,_0x4d38c1);}exports['uploadComputers']=uploadComputers;const deleteComputers=()=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){});exports['deleteComputers']=deleteComputers;const fetchInfractionReports=(_0x5382a0,_0x2d975d)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x615abd=a13_0xb37d66;var _0x3bfee1;const _0xbdcb1e=yield appNetwork_1[_0x615abd(0x1a9)][_0x615abd(0x192)](_0x615abd(0x1a6),{'headers':{'centreid':(_0x3bfee1=_0x5382a0[_0x615abd(0x1bd)])===null||_0x3bfee1===void 0x0?void 0x0:_0x3bfee1['_id'][_0x615abd(0x1c3)]()},'params':{'page':_0x5382a0[_0x615abd(0x193)]['page']||0x1,'limit':_0x5382a0['query'][_0x615abd(0x1c6)]||0x32}});_0x2d975d[_0x615abd(0x1b3)](_0xbdcb1e[_0x615abd(0x1b3)])[_0x615abd(0x180)](_0xbdcb1e[_0x615abd(0x1ae)]);});function a13_0x4729(){const _0x2c25a6=['toString','deleteComputers','../models/centreModel','limit','insertMany','value','serialNumber','send','uploaded','2323296DWpvKN','__importDefault','post','4393220pASgDL','915010TUNjZd','centre/uploadcomputer','lean','throw','map','Could\x20not\x20import\x20new\x20computers','MAC\x20address','Computer\x20already\x20registered\x20â€”\x20duplicate\x20','error','skip','../models/computerModel','viewRegisteredComputers','get','query','registerComputer','306392VgJnoq','viewCleanedComputers','3OExofC','next','126wgtVAY','toLowerCase','9ZPnKcm','237936mIOyFZ','params','findById','deleteComputer','findOne','includes','processorId','defineProperty','Centre\x20not\x20found','done','centre/infractions','processor\x20ID','serial\x20number','httpService','body','__esModule','217974BAQAcw','find','data','viewComputer','Internal\x20server\x20error','not\x20uploaded','some','status','push','then','apply','42840udzYsc','deleteOne','__awaiter','all','_id','countDocuments','centre','assign','fetchInfractionReports','macAddresses','default','Missing\x20required\x20fields'];a13_0x4729=function(){return _0x2c25a6;};return a13_0x4729();}exports[a13_0xb37d66(0x1bf)]=fetchInfractionReports;const getComputers=(_0x25d92d,_0x4d918d)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2fad30=a13_0xb37d66;var _0x294542;try{const _0x4437c0=yield appNetwork_1[_0x2fad30(0x1a9)][_0x2fad30(0x192)]('centre/centrecomputers',{'params':{'centre':(_0x294542=_0x25d92d[_0x2fad30(0x1bd)])===null||_0x294542===void 0x0?void 0x0:_0x294542[_0x2fad30(0x1bb)][_0x2fad30(0x1c3)]()}});if(_0x4437c0[_0x2fad30(0x1b3)]===0xc8)yield computerModel_1['default']['deleteMany'](),yield computerModel_1[_0x2fad30(0x1c1)][_0x2fad30(0x1c7)](_0x4437c0[_0x2fad30(0x1ae)]),_0x4d918d['send']('New\x20computers\x20imported');else _0x4d918d[_0x2fad30(0x1b3)](_0x4437c0[_0x2fad30(0x1b3)])[_0x2fad30(0x180)](_0x2fad30(0x18b));}catch(_0x1663d6){console['error'](_0x1663d6),_0x4d918d[_0x2fad30(0x1b3)](0x1f4)[_0x2fad30(0x180)](_0x2fad30(0x1b0));}});exports['getComputers']=getComputers;const deleteComputer=(_0x8e03de,_0x4439b7)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5aea57=a13_0xb37d66;yield computerModel_1[_0x5aea57(0x1c1)][_0x5aea57(0x1b8)]({'_id':_0x8e03de['params']['id']}),_0x4439b7[_0x5aea57(0x180)]('Computer\x20deleted');});exports[a13_0xb37d66(0x19f)]=deleteComputer;const viewCleanedComputers=(_0xff857a,_0x5b1f4e)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x55bd9b=a13_0xb37d66,_0x485772=yield computerModel_1[_0x55bd9b(0x1c1)][_0x55bd9b(0x1ad)]({'flagged':![]})[_0x55bd9b(0x188)]();_0x5b1f4e[_0x55bd9b(0x180)](_0x485772);});exports[a13_0xb37d66(0x196)]=viewCleanedComputers;const viewComputer=(_0x871f82,_0x53e37c)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1eec6b=a13_0xb37d66,_0x4b5649=yield computerModel_1[_0x1eec6b(0x1c1)][_0x1eec6b(0x19e)](_0x871f82[_0x1eec6b(0x19d)]['id'])[_0x1eec6b(0x188)](),_0x38a0eb=_0x871f82['ip'];_0x53e37c[_0x1eec6b(0x180)](Object[_0x1eec6b(0x1be)](Object[_0x1eec6b(0x1be)]({},_0x4b5649),{'ip':_0x38a0eb}));});exports['viewComputer']=viewComputer;