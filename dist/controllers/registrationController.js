'use strict';const a15_0x22a403=a15_0x315c;(function(_0x57795e,_0x4d7896){const _0x3e0fa1=a15_0x315c,_0x147ba5=_0x57795e();while(!![]){try{const _0xa15e8b=-parseInt(_0x3e0fa1(0x1c2))/0x1+-parseInt(_0x3e0fa1(0x1ca))/0x2+parseInt(_0x3e0fa1(0x1a6))/0x3+-parseInt(_0x3e0fa1(0x1a8))/0x4+-parseInt(_0x3e0fa1(0x1cf))/0x5*(parseInt(_0x3e0fa1(0x1aa))/0x6)+parseInt(_0x3e0fa1(0x1b9))/0x7+parseInt(_0x3e0fa1(0x1d9))/0x8;if(_0xa15e8b===_0x4d7896)break;else _0x147ba5['push'](_0x147ba5['shift']());}catch(_0x258c53){_0x147ba5['push'](_0x147ba5['shift']());}}}(a15_0x45ee,0x5144a));var __awaiter=this&&this[a15_0x22a403(0x1c1)]||function(_0x5e3b6b,_0x38a8a4,_0x5e920c,_0x3568a0){function _0x4bccbb(_0x16dc6f){return _0x16dc6f instanceof _0x5e920c?_0x16dc6f:new _0x5e920c(function(_0x1133bb){_0x1133bb(_0x16dc6f);});}return new(_0x5e920c||(_0x5e920c=Promise))(function(_0xfbea7d,_0x351855){const _0x263ad8=a15_0x315c;function _0x5ed63e(_0x64fff6){const _0x3fbff6=a15_0x315c;try{_0x5162df(_0x3568a0[_0x3fbff6(0x1dd)](_0x64fff6));}catch(_0x48c256){_0x351855(_0x48c256);}}function _0x54ba3c(_0x4e0135){try{_0x5162df(_0x3568a0['throw'](_0x4e0135));}catch(_0x455341){_0x351855(_0x455341);}}function _0x5162df(_0xcc7a41){const _0x4fb401=a15_0x315c;_0xcc7a41[_0x4fb401(0x1e1)]?_0xfbea7d(_0xcc7a41[_0x4fb401(0x1ed)]):_0x4bccbb(_0xcc7a41['value'])[_0x4fb401(0x1cb)](_0x5ed63e,_0x54ba3c);}_0x5162df((_0x3568a0=_0x3568a0[_0x263ad8(0x1af)](_0x5e3b6b,_0x38a8a4||[]))[_0x263ad8(0x1dd)]());});},__importDefault=this&&this['__importDefault']||function(_0x4639d6){const _0x3a718c=a15_0x22a403;return _0x4639d6&&_0x4639d6[_0x3a718c(0x1c3)]?_0x4639d6:{'default':_0x4639d6};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a15_0x22a403(0x1c7)]=exports['viewCleanedComputers']=exports[a15_0x22a403(0x1b5)]=exports[a15_0x22a403(0x1b7)]=exports[a15_0x22a403(0x1c8)]=exports[a15_0x22a403(0x1cd)]=exports[a15_0x22a403(0x1d1)]=exports['viewRegisteredComputers']=exports['registerComputer']=void 0x0;const computerModel_1=__importDefault(require(a15_0x22a403(0x1cc))),centreModel_1=__importDefault(require(a15_0x22a403(0x1bf))),httpService_1=require(a15_0x22a403(0x1e6)),registerComputer=(_0x52ee78,_0x5e9fdc)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x31c132=a15_0x22a403;var _0x4fe7bf,_0xb98283;try{const _0x1ace76=yield centreModel_1['default']['findOne']();if(!_0x1ace76)return _0x5e9fdc[_0x31c132(0x1ad)](0x190)[_0x31c132(0x1db)](_0x31c132(0x1bd));const _0x320bfa=_0x52ee78[_0x31c132(0x1bc)];if(!_0x320bfa[_0x31c132(0x1a7)]||!_0x320bfa[_0x31c132(0x1d7)]||!_0x320bfa[_0x31c132(0x1df)]||_0x320bfa[_0x31c132(0x1df)]['length']===0x0)return _0x5e9fdc[_0x31c132(0x1ad)](0x190)[_0x31c132(0x1db)]('Missing\x20required\x20fields');const _0x5061e4=(_0x4fe7bf=_0x320bfa[_0x31c132(0x1a7)])===null||_0x4fe7bf===void 0x0?void 0x0:_0x4fe7bf[_0x31c132(0x1d5)](),_0x58b590=(_0xb98283=_0x320bfa[_0x31c132(0x1d7)])===null||_0xb98283===void 0x0?void 0x0:_0xb98283['toLowerCase'](),_0x287663=(_0x320bfa['macAddresses']||[])[_0x31c132(0x1e8)](_0x730f34=>_0x730f34[_0x31c132(0x1d5)]()),_0x4bf5dc=yield computerModel_1['default'][_0x31c132(0x1e0)]({'$and':[{'serialNumber':_0x5061e4},{'processorId':_0x58b590},{'macAddresses':{'$in':_0x287663}}]});if(_0x4bf5dc){let _0x1451ff=[];if(_0x4bf5dc[_0x31c132(0x1a7)]===_0x5061e4)_0x1451ff[_0x31c132(0x1c5)]('serial\x20number');if(_0x4bf5dc[_0x31c132(0x1d7)]===_0x58b590)_0x1451ff[_0x31c132(0x1c5)](_0x31c132(0x1ba));if(_0x4bf5dc['macAddresses'][_0x31c132(0x1d3)](_0x569e4a=>_0x287663[_0x31c132(0x1b6)](_0x569e4a)))_0x1451ff[_0x31c132(0x1c5)](_0x31c132(0x1eb));return _0x5e9fdc[_0x31c132(0x1ad)](0x190)[_0x31c132(0x1db)]('Computer\x20already\x20registered\x20â€”\x20duplicate\x20'+_0x1451ff['join'](',\x20')+'.');}const _0x48dc3f=new computerModel_1[(_0x31c132(0x1b3))](Object['assign'](Object[_0x31c132(0x1ac)]({},_0x320bfa),{'serialNumber':_0x5061e4,'processorId':_0x58b590,'macAddresses':_0x287663,'centre':_0x1ace76[_0x31c132(0x1e4)]}));yield _0x48dc3f[_0x31c132(0x1c9)](),_0x5e9fdc[_0x31c132(0x1db)](_0x31c132(0x1da));}catch(_0x1b3880){console[_0x31c132(0x1e5)](_0x1b3880),_0x5e9fdc[_0x31c132(0x1ad)](0x1f4)['send'](_0x31c132(0x1de));}});exports[a15_0x22a403(0x1d2)]=registerComputer;const viewRegisteredComputers=(_0xcd5121,_0x5c5461)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5acee4=a15_0x22a403,_0x3ad788=_0xcd5121['query'][_0x5acee4(0x1e2)]||0x1,_0x4ea4a9=_0xcd5121[_0x5acee4(0x1b8)][_0x5acee4(0x1b2)]||0x32,_0x43b541=yield computerModel_1['default'][_0x5acee4(0x1ea)]({})[_0x5acee4(0x1be)]((_0x3ad788-0x1)*_0x4ea4a9)[_0x5acee4(0x1b2)](_0x4ea4a9)[_0x5acee4(0x1e7)](),[_0x43f158,_0x55e84e,_0xc2cbad,_0x563508,_0x4b8c5b]=yield Promise[_0x5acee4(0x1e3)]([computerModel_1[_0x5acee4(0x1b3)][_0x5acee4(0x1ee)](),computerModel_1[_0x5acee4(0x1b3)][_0x5acee4(0x1ee)]({'flagged':![]}),computerModel_1['default'][_0x5acee4(0x1ee)]({'flagged':!![]}),computerModel_1[_0x5acee4(0x1b3)]['countDocuments']({'status':'uploaded'}),computerModel_1['default'][_0x5acee4(0x1ee)]({'status':_0x5acee4(0x1a9)})]),_0x590991=_0x43b541['map']((_0x1d8f9a,_0x6ff757)=>{const _0x6328cd=_0x5acee4;return Object[_0x6328cd(0x1ac)](Object['assign']({},_0x1d8f9a),{'id':(_0x3ad788-0x1)*_0x4ea4a9+_0x6ff757+0x1});});_0x5c5461[_0x5acee4(0x1db)]({'total':_0x43f158,'totalComputers':_0x590991,'cleanComputers':_0x55e84e,'infractions':_0xc2cbad,'uploaded':_0x563508,'notUploaded':_0x4b8c5b});});exports[a15_0x22a403(0x1dc)]=viewRegisteredComputers;const uploadComputers=(_0x549254,_0x5c288d)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x315f1e=a15_0x22a403;var _0x44db41;const _0x3e4fc4=yield computerModel_1[_0x315f1e(0x1b3)]['find']({'status':_0x315f1e(0x1a9)}),_0x582477=yield httpService_1[_0x315f1e(0x1d6)]['post'](_0x315f1e(0x1b1),{'computers':_0x3e4fc4,'centreId':(_0x44db41=_0x549254[_0x315f1e(0x1e9)])===null||_0x44db41===void 0x0?void 0x0:_0x44db41['_id'][_0x315f1e(0x1d4)]()});_0x5c288d[_0x315f1e(0x1ad)](_0x582477[_0x315f1e(0x1ad)])['send'](_0x582477[_0x315f1e(0x1ae)]);});exports[a15_0x22a403(0x1d1)]=uploadComputers;const deleteComputers=()=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){});exports['deleteComputers']=deleteComputers;const fetchInfractionReports=(_0x10f19b,_0xdf10d6)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x52d6c4=a15_0x22a403;var _0x1d1b14;const _0x410c6b=yield httpService_1[_0x52d6c4(0x1d6)]['get'](_0x52d6c4(0x1c4),{'headers':{'centreid':(_0x1d1b14=_0x10f19b['centre'])===null||_0x1d1b14===void 0x0?void 0x0:_0x1d1b14['_id'][_0x52d6c4(0x1d4)]()},'params':{'page':_0x10f19b[_0x52d6c4(0x1b8)]['page']||0x1,'limit':_0x10f19b['query']['limit']||0x32}});_0xdf10d6['status'](_0x410c6b[_0x52d6c4(0x1ad)])[_0x52d6c4(0x1db)](_0x410c6b['data']);});exports[a15_0x22a403(0x1c8)]=fetchInfractionReports;const getComputers=(_0x5c4bc9,_0x15822e)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x44743e=a15_0x22a403;var _0x472618;try{const _0x2c0df5=yield httpService_1['httpService'][_0x44743e(0x1bb)](_0x44743e(0x1b4),{'params':{'centre':(_0x472618=_0x5c4bc9[_0x44743e(0x1e9)])===null||_0x472618===void 0x0?void 0x0:_0x472618[_0x44743e(0x1e4)][_0x44743e(0x1d4)]()}});if(_0x2c0df5[_0x44743e(0x1ad)]===0xc8)yield computerModel_1[_0x44743e(0x1b3)][_0x44743e(0x1d0)](),yield computerModel_1['default'][_0x44743e(0x1ab)](_0x2c0df5[_0x44743e(0x1ae)]),_0x15822e[_0x44743e(0x1db)](_0x44743e(0x1ec));else _0x15822e[_0x44743e(0x1ad)](_0x2c0df5[_0x44743e(0x1ad)])[_0x44743e(0x1db)](_0x44743e(0x1c0));}catch(_0x2506f3){console[_0x44743e(0x1e5)](_0x2506f3),_0x15822e['status'](0x1f4)[_0x44743e(0x1db)](_0x44743e(0x1de));}});exports['getComputers']=getComputers;const deleteComputer=(_0x5696a1,_0x4cde65)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1c665a=a15_0x22a403;yield computerModel_1[_0x1c665a(0x1b3)][_0x1c665a(0x1b0)]({'_id':_0x5696a1[_0x1c665a(0x1d8)]['id']}),_0x4cde65[_0x1c665a(0x1db)](_0x1c665a(0x1ce));});exports[a15_0x22a403(0x1b5)]=deleteComputer;const viewCleanedComputers=(_0x2e1db5,_0x5f09f6)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x530b44=a15_0x22a403,_0x5af62a=yield computerModel_1[_0x530b44(0x1b3)][_0x530b44(0x1ea)]({'flagged':![]})[_0x530b44(0x1e7)]();_0x5f09f6[_0x530b44(0x1db)](_0x5af62a);});exports[a15_0x22a403(0x1c6)]=viewCleanedComputers;const viewComputer=(_0x4e5c67,_0x447e3f)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2e8f5b=a15_0x22a403,_0x3932de=yield computerModel_1[_0x2e8f5b(0x1b3)]['findById'](_0x4e5c67[_0x2e8f5b(0x1d8)]['id'])[_0x2e8f5b(0x1e7)](),_0x3f7d1e=_0x4e5c67['ip'];_0x447e3f[_0x2e8f5b(0x1db)](Object[_0x2e8f5b(0x1ac)](Object[_0x2e8f5b(0x1ac)]({},_0x3932de),{'ip':_0x3f7d1e}));});exports[a15_0x22a403(0x1c7)]=viewComputer;function a15_0x315c(_0x332dcc,_0x1f43fb){const _0x45eef5=a15_0x45ee();return a15_0x315c=function(_0x315c34,_0x4378a5){_0x315c34=_0x315c34-0x1a6;let _0x2fcdab=_0x45eef5[_0x315c34];return _0x2fcdab;},a15_0x315c(_0x332dcc,_0x1f43fb);}function a15_0x45ee(){const _0x52e922=['limit','default','centre/centrecomputers','deleteComputer','includes','getComputers','query','3988278whyquT','processor\x20ID','get','body','Centre\x20not\x20found','skip','../models/centreModel','Could\x20not\x20import\x20new\x20computers','__awaiter','70152IZQKZm','__esModule','centre/infractions','push','viewCleanedComputers','viewComputer','fetchInfractionReports','save','1174904XHLobR','then','../models/computerModel','deleteComputers','Computer\x20deleted','5kbwQAk','deleteMany','uploadComputers','registerComputer','some','toString','toLowerCase','httpService','processorId','params','6545256lYmpOd','Computer\x20registered\x20successfully','send','viewRegisteredComputers','next','Internal\x20server\x20error','macAddresses','findOne','done','page','all','_id','error','../httpService','lean','map','centre','find','MAC\x20address','New\x20computers\x20imported','value','countDocuments','604968etnFxA','serialNumber','1771436uqEpSI','not\x20uploaded','937380jEFlvr','insertMany','assign','status','data','apply','deleteOne','centre/uploadcomputer'];a15_0x45ee=function(){return _0x52e922;};return a15_0x45ee();}