'use strict';const a4_0x526543=a4_0x5e40;(function(_0x59321a,_0x5899c4){const _0x3151ef=a4_0x5e40,_0x5afb78=_0x59321a();while(!![]){try{const _0x13f6c3=parseInt(_0x3151ef(0x150))/0x1*(-parseInt(_0x3151ef(0x130))/0x2)+parseInt(_0x3151ef(0x121))/0x3+parseInt(_0x3151ef(0x120))/0x4+parseInt(_0x3151ef(0x13a))/0x5+parseInt(_0x3151ef(0x148))/0x6*(-parseInt(_0x3151ef(0x14f))/0x7)+parseInt(_0x3151ef(0x146))/0x8+-parseInt(_0x3151ef(0x12c))/0x9*(-parseInt(_0x3151ef(0x134))/0xa);if(_0x13f6c3===_0x5899c4)break;else _0x5afb78['push'](_0x5afb78['shift']());}catch(_0x3fea0c){_0x5afb78['push'](_0x5afb78['shift']());}}}(a4_0x31dc,0x24e28));var __awaiter=this&&this['__awaiter']||function(_0x52b73c,_0x31de47,_0x384e0d,_0x5d819d){function _0x35327c(_0x580a3e){return _0x580a3e instanceof _0x384e0d?_0x580a3e:new _0x384e0d(function(_0x7566e5){_0x7566e5(_0x580a3e);});}return new(_0x384e0d||(_0x384e0d=Promise))(function(_0x38dc76,_0x76ae81){const _0x223ae8=a4_0x5e40;function _0x1235a5(_0x23ddb0){const _0x105541=a4_0x5e40;try{_0x3671f0(_0x5d819d[_0x105541(0x157)](_0x23ddb0));}catch(_0x279237){_0x76ae81(_0x279237);}}function _0x328cd(_0x200561){const _0xefb163=a4_0x5e40;try{_0x3671f0(_0x5d819d[_0xefb163(0x12d)](_0x200561));}catch(_0x4d3cca){_0x76ae81(_0x4d3cca);}}function _0x3671f0(_0x109857){const _0x172a8c=a4_0x5e40;_0x109857[_0x172a8c(0x135)]?_0x38dc76(_0x109857['value']):_0x35327c(_0x109857[_0x172a8c(0x143)])[_0x172a8c(0x147)](_0x1235a5,_0x328cd);}_0x3671f0((_0x5d819d=_0x5d819d[_0x223ae8(0x132)](_0x52b73c,_0x31de47||[]))[_0x223ae8(0x157)]());});},__importDefault=this&&this[a4_0x526543(0x127)]||function(_0x1e305b){const _0xb8748f=a4_0x526543;return _0x1e305b&&_0x1e305b[_0xb8748f(0x13e)]?_0x1e305b:{'default':_0x1e305b};};Object[a4_0x526543(0x11c)](exports,a4_0x526543(0x13e),{'value':!![]}),exports[a4_0x526543(0x12f)]=exports[a4_0x526543(0x13f)]=exports[a4_0x526543(0x125)]=exports[a4_0x526543(0x142)]=exports[a4_0x526543(0x144)]=exports[a4_0x526543(0x159)]=void 0x0;const appNetwork_1=require(a4_0x526543(0x12e)),centreModel_1=__importDefault(require('../models/centreModel')),jwtController_1=require(a4_0x526543(0x15e)),jsonwebtoken_1=__importDefault(require(a4_0x526543(0x137))),computerModel_1=__importDefault(require(a4_0x526543(0x141))),networkTest_1=__importDefault(require(a4_0x526543(0x14c))),loginAccount=(_0x5d8abb,_0x13b1ed)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2bc191=a4_0x526543;try{const _0x10be3e=yield appNetwork_1[_0x2bc191(0x13b)]['post'](_0x2bc191(0x15c),_0x5d8abb[_0x2bc191(0x136)]);if(_0x10be3e['status']!==0xc8)return _0x13b1ed[_0x2bc191(0x15a)](_0x2bc191(0x128))['clearCookie'](_0x2bc191(0x140))['status'](_0x10be3e[_0x2bc191(0x154)])[_0x2bc191(0x11b)](_0x10be3e[_0x2bc191(0x139)]);const {centre:_0x366349,computers:_0x3f6295,networkTests:_0x3745d1}=_0x10be3e[_0x2bc191(0x139)];if(!_0x366349||!_0x3f6295||!_0x3745d1)return _0x13b1ed[_0x2bc191(0x154)](0x190)[_0x2bc191(0x11b)](_0x2bc191(0x15b));yield Promise['all']([centreModel_1['default'][_0x2bc191(0x149)](),computerModel_1[_0x2bc191(0x15f)]['deleteMany'](),networkTest_1[_0x2bc191(0x15f)][_0x2bc191(0x149)]()]),yield centreModel_1[_0x2bc191(0x15f)][_0x2bc191(0x126)](_0x366349),yield computerModel_1['default'][_0x2bc191(0x133)](_0x3f6295),yield networkTest_1['default'][_0x2bc191(0x133)](_0x3745d1);const _0x289b88=(0x0,jwtController_1[_0x2bc191(0x12a)])(Object[_0x2bc191(0x153)](Object[_0x2bc191(0x153)]({},_0x366349),{'role':'admin'})),_0x1381e1=(0x0,jwtController_1[_0x2bc191(0x12b)])(Object['assign'](Object['assign']({},_0x366349),{'role':_0x2bc191(0x11d)}));_0x13b1ed[_0x2bc191(0x11f)]('accessToken',_0x289b88,{'httpOnly':![],'secure':!![],'sameSite':_0x2bc191(0x131),'maxAge':0x3e8*0x3c*0x3c*0x18})[_0x2bc191(0x11f)](_0x2bc191(0x140),_0x1381e1,{'httpOnly':![],'secure':!![],'sameSite':'none','maxAge':0x3e8*0x3c*0x3c*0x18*0x7})['send'](_0x2bc191(0x122));}catch(_0x27b819){console[_0x2bc191(0x151)](_0x2bc191(0x155),_0x27b819[_0x2bc191(0x14b)]),_0x13b1ed[_0x2bc191(0x154)](0x1f4)['send'](_0x2bc191(0x14a));}});exports[a4_0x526543(0x159)]=loginAccount;const logoutAccount=(_0x28bcd6,_0x5c021b)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1959f8=a4_0x526543;yield Promise[_0x1959f8(0x123)]([centreModel_1[_0x1959f8(0x15f)][_0x1959f8(0x149)](),computerModel_1[_0x1959f8(0x15f)][_0x1959f8(0x149)]()]),_0x5c021b[_0x1959f8(0x15a)](_0x1959f8(0x128))[_0x1959f8(0x15a)](_0x1959f8(0x140))[_0x1959f8(0x11b)]('Success');});exports['logoutAccount']=logoutAccount;const centreProfile=(_0xd09212,_0x159d44)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x484180=a4_0x526543;_0x159d44['send'](_0xd09212[_0x484180(0x11e)]);});exports[a4_0x526543(0x142)]=centreProfile;const getRefreshToken=(_0x4821c8,_0x3979d9)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x242356=a4_0x526543,_0x3c702f=_0x4821c8[_0x242356(0x14e)][jwtController_1[_0x242356(0x15d)][_0x242356(0x140)]];if(!_0x3c702f)return _0x3979d9['sendStatus'](0x191);try{const _0x4c3f09=jsonwebtoken_1[_0x242356(0x15f)][_0x242356(0x152)](_0x3c702f,process[_0x242356(0x14d)][_0x242356(0x13d)]),_0x121a15=yield centreModel_1['default'][_0x242356(0x13c)](_0x4c3f09[_0x242356(0x124)])[_0x242356(0x156)]();if(!_0x121a15)return _0x3979d9[_0x242356(0x129)](0x191);const _0x398604=(0x0,jwtController_1[_0x242356(0x12a)])(Object[_0x242356(0x153)](Object[_0x242356(0x153)]({},_0x121a15),{'role':_0x242356(0x11d)})),_0x2ea826=(0x0,jwtController_1[_0x242356(0x12b)])(Object['assign'](Object[_0x242356(0x153)]({},_0x121a15),{'role':'admin'}));_0x3979d9['cookie'](_0x242356(0x128),_0x398604,{'httpOnly':![],'secure':!![],'sameSite':_0x242356(0x131),'maxAge':0x3e8*0x3c*0x3c*0x18})[_0x242356(0x11f)](_0x242356(0x140),_0x2ea826,{'httpOnly':![],'secure':!![],'sameSite':'none','maxAge':0x3e8*0x3c*0x3c*0x18*0x7})['send']('Success');}catch(_0x52c6dc){_0x3979d9['status'](0x191)[_0x242356(0x11b)](_0x242356(0x138));}});exports[a4_0x526543(0x125)]=getRefreshToken;const centreDashboard=(_0xfce651,_0x1723e1)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x19fd06=a4_0x526543;var _0x51e7a7;const _0x69998e=yield(0x0,appNetwork_1[_0x19fd06(0x13b)])(_0x19fd06(0x145),{'headers':{'centreid':(_0x51e7a7=_0xfce651[_0x19fd06(0x11e)])===null||_0x51e7a7===void 0x0?void 0x0:_0x51e7a7['_id'][_0x19fd06(0x158)]()}});_0x1723e1['status'](_0x69998e[_0x19fd06(0x154)])['send'](_0x69998e['data']);});exports['centreDashboard']=centreDashboard;function a4_0x5e40(_0x7966be,_0x1e9458){const _0x31dce5=a4_0x31dc();return a4_0x5e40=function(_0x5e40ff,_0x5db979){_0x5e40ff=_0x5e40ff-0x11b;let _0x1f794c=_0x31dce5[_0x5e40ff];return _0x1f794c;},a4_0x5e40(_0x7966be,_0x1e9458);}function a4_0x31dc(){const _0x4bea1c=['Something\x20went\x20wrong','message','../models/networkTest','env','cookies','9401lHACpr','1gvHtvT','error','verify','assign','status','Login\x20error:','lean','next','toString','loginAccount','clearCookie','Incomplete\x20response\x20data','centre/login','tokens','./jwtController','default','send','defineProperty','admin','centre','cookie','876232XZIhea','338049VrcDSb','Success','all','_id','getRefreshToken','create','__importDefault','accessToken','sendStatus','generateAccessToken','generateRefreshToken','323577ZDDSbw','throw','../appNetwork','centreDetail','511508EBfMvu','none','apply','insertMany','50sBlZQu','done','body','jsonwebtoken','Invalid\x20refresh\x20token','data','498405xYWnyk','httpService','findById','REFRESH_TOKEN','__esModule','centreDashboard','refreshToken','../models/computerModel','centreProfile','value','logoutAccount','centre/dashboard','632160slRQkG','then','1266fyFDWW','deleteMany'];a4_0x31dc=function(){return _0x4bea1c;};return a4_0x31dc();}const centreDetail=(_0x57f916,_0x41459)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x12625d=a4_0x526543,_0x30b34a=yield centreModel_1[_0x12625d(0x15f)]['findOne']();_0x41459['send'](_0x30b34a);});exports['centreDetail']=centreDetail;