'use strict';const a5_0x357a3a=a5_0x1c29;function a5_0x125c(){const _0x4baca6=['6380200fSxGtB','200555bVmojr','generateRefreshToken','321561ymOlCX','centreDashboard','insertMany','sendStatus','all','default','cookies','clearCookie','logoutAccount','accessToken','generateAccessToken','send','value','REFRESH_TOKEN','__importDefault','10110688TcuTLL','centre','loginAccount','status','next','lean','centre/login','cookie','centre/dashboard','then','../models/networkTest','Something\x20went\x20wrong','toString','../models/centreModel','centreDetail','admin','done','body','4SGakcW','_id','4191861LDjFZg','findOne','apply','1844423eYfuEP','Incomplete\x20response\x20data','../models/computerModel','defineProperty','throw','Success','Invalid\x20refresh\x20token','message','getRefreshToken','467708dlWAou','./jwtController','../httpService','assign','centreProfile','__esModule','none','42UkAagW','Login\x20error:','data','refreshToken','deleteMany'];a5_0x125c=function(){return _0x4baca6;};return a5_0x125c();}(function(_0x4581f8,_0x338249){const _0x4465ae=a5_0x1c29,_0x2baaf7=_0x4581f8();while(!![]){try{const _0x12e3ea=-parseInt(_0x4465ae(0x1a3))/0x1*(parseInt(_0x4465ae(0x195))/0x2)+parseInt(_0x4465ae(0x197))/0x3+parseInt(_0x4465ae(0x171))/0x4+-parseInt(_0x4465ae(0x172))/0x5*(-parseInt(_0x4465ae(0x1aa))/0x6)+-parseInt(_0x4465ae(0x19a))/0x7+-parseInt(_0x4465ae(0x183))/0x8+parseInt(_0x4465ae(0x174))/0x9;if(_0x12e3ea===_0x338249)break;else _0x2baaf7['push'](_0x2baaf7['shift']());}catch(_0xd61948){_0x2baaf7['push'](_0x2baaf7['shift']());}}}(a5_0x125c,0xce916));var __awaiter=this&&this['__awaiter']||function(_0x50fc1a,_0xa436e0,_0x33f4c6,_0x4221a4){function _0x31c0ae(_0x30190c){return _0x30190c instanceof _0x33f4c6?_0x30190c:new _0x33f4c6(function(_0x6aea0c){_0x6aea0c(_0x30190c);});}return new(_0x33f4c6||(_0x33f4c6=Promise))(function(_0x3dfbfa,_0x1a8b5f){const _0x3b7aed=a5_0x1c29;function _0x44fb44(_0x4eebec){const _0x1b3d0b=a5_0x1c29;try{_0x4ddc8f(_0x4221a4[_0x1b3d0b(0x187)](_0x4eebec));}catch(_0x45bbd1){_0x1a8b5f(_0x45bbd1);}}function _0x546ecc(_0x3a873c){const _0x1851be=a5_0x1c29;try{_0x4ddc8f(_0x4221a4[_0x1851be(0x19e)](_0x3a873c));}catch(_0x5c481a){_0x1a8b5f(_0x5c481a);}}function _0x4ddc8f(_0x11bf7c){const _0x4f6ed6=a5_0x1c29;_0x11bf7c[_0x4f6ed6(0x193)]?_0x3dfbfa(_0x11bf7c['value']):_0x31c0ae(_0x11bf7c[_0x4f6ed6(0x180)])[_0x4f6ed6(0x18c)](_0x44fb44,_0x546ecc);}_0x4ddc8f((_0x4221a4=_0x4221a4[_0x3b7aed(0x199)](_0x50fc1a,_0xa436e0||[]))[_0x3b7aed(0x187)]());});},__importDefault=this&&this[a5_0x357a3a(0x182)]||function(_0x87baeb){const _0x14c13c=a5_0x357a3a;return _0x87baeb&&_0x87baeb[_0x14c13c(0x1a8)]?_0x87baeb:{'default':_0x87baeb};};Object[a5_0x357a3a(0x19d)](exports,a5_0x357a3a(0x1a8),{'value':!![]}),exports[a5_0x357a3a(0x191)]=exports['centreDashboard']=exports[a5_0x357a3a(0x1a2)]=exports['centreProfile']=exports[a5_0x357a3a(0x17c)]=exports[a5_0x357a3a(0x185)]=void 0x0;const httpService_1=require(a5_0x357a3a(0x1a5)),centreModel_1=__importDefault(require(a5_0x357a3a(0x190))),jwtController_1=require(a5_0x357a3a(0x1a4)),jsonwebtoken_1=__importDefault(require('jsonwebtoken')),computerModel_1=__importDefault(require(a5_0x357a3a(0x19c))),networkTest_1=__importDefault(require(a5_0x357a3a(0x18d))),loginAccount=(_0x4f4b9d,_0x3bbd44)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x4c57fe=a5_0x357a3a;try{const _0x57af0e=yield httpService_1['httpService']['post'](_0x4c57fe(0x189),_0x4f4b9d[_0x4c57fe(0x194)]);if(_0x57af0e['status']!==0xc8)return _0x3bbd44[_0x4c57fe(0x17b)]('accessToken')[_0x4c57fe(0x17b)](_0x4c57fe(0x16f))['status'](_0x57af0e['status'])[_0x4c57fe(0x17f)](_0x57af0e[_0x4c57fe(0x16e)]);const {centre:_0x301902,computers:_0x106a11,networkTests:_0x35fe55}=_0x57af0e[_0x4c57fe(0x16e)];if(!_0x301902||!_0x106a11||!_0x35fe55)return _0x3bbd44['status'](0x190)[_0x4c57fe(0x17f)](_0x4c57fe(0x19b));yield Promise[_0x4c57fe(0x178)]([centreModel_1[_0x4c57fe(0x179)]['deleteMany'](),computerModel_1['default'][_0x4c57fe(0x170)](),networkTest_1[_0x4c57fe(0x179)]['deleteMany']()]),yield centreModel_1[_0x4c57fe(0x179)]['create'](_0x301902),yield computerModel_1[_0x4c57fe(0x179)][_0x4c57fe(0x176)](_0x106a11),yield networkTest_1[_0x4c57fe(0x179)][_0x4c57fe(0x176)](_0x35fe55);const _0xd3261a=(0x0,jwtController_1[_0x4c57fe(0x17e)])(Object[_0x4c57fe(0x1a6)](Object['assign']({},_0x301902),{'role':_0x4c57fe(0x192)})),_0x49cf4e=(0x0,jwtController_1[_0x4c57fe(0x173)])(Object[_0x4c57fe(0x1a6)](Object[_0x4c57fe(0x1a6)]({},_0x301902),{'role':_0x4c57fe(0x192)}));_0x3bbd44['cookie'](_0x4c57fe(0x17d),_0xd3261a,{'httpOnly':![],'secure':!![],'sameSite':'none','maxAge':0x3e8*0x3c*0x3c*0x18})[_0x4c57fe(0x18a)](_0x4c57fe(0x16f),_0x49cf4e,{'httpOnly':![],'secure':!![],'sameSite':_0x4c57fe(0x1a9),'maxAge':0x3e8*0x3c*0x3c*0x18*0x7})['send'](_0x4c57fe(0x19f));}catch(_0x59e757){console['error'](_0x4c57fe(0x1ab),_0x59e757[_0x4c57fe(0x1a1)]),_0x3bbd44['status'](0x1f4)[_0x4c57fe(0x17f)](_0x4c57fe(0x18e));}});function a5_0x1c29(_0x3e17d0,_0x361b54){const _0x125c18=a5_0x125c();return a5_0x1c29=function(_0x1c296b,_0x51d4dc){_0x1c296b=_0x1c296b-0x16e;let _0x43c89b=_0x125c18[_0x1c296b];return _0x43c89b;},a5_0x1c29(_0x3e17d0,_0x361b54);}exports[a5_0x357a3a(0x185)]=loginAccount;const logoutAccount=(_0x52c9cc,_0x45eb50)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5a2c4d=a5_0x357a3a;yield Promise[_0x5a2c4d(0x178)]([centreModel_1[_0x5a2c4d(0x179)][_0x5a2c4d(0x170)](),computerModel_1['default'][_0x5a2c4d(0x170)]()]),_0x45eb50[_0x5a2c4d(0x17b)]('accessToken')[_0x5a2c4d(0x17b)](_0x5a2c4d(0x16f))[_0x5a2c4d(0x17f)](_0x5a2c4d(0x19f));});exports[a5_0x357a3a(0x17c)]=logoutAccount;const centreProfile=(_0x2a9635,_0x491422)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0xc1d618=a5_0x357a3a;_0x491422['send'](_0x2a9635[_0xc1d618(0x184)]);});exports[a5_0x357a3a(0x1a7)]=centreProfile;const getRefreshToken=(_0x1cff12,_0x1b32ca)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x51e861=a5_0x357a3a,_0x4aaad0=_0x1cff12[_0x51e861(0x17a)][jwtController_1['tokens'][_0x51e861(0x16f)]];if(!_0x4aaad0)return _0x1b32ca[_0x51e861(0x177)](0x191);try{const _0x22dab0=jsonwebtoken_1[_0x51e861(0x179)]['verify'](_0x4aaad0,process['env'][_0x51e861(0x181)]),_0x59f546=yield centreModel_1[_0x51e861(0x179)]['findById'](_0x22dab0['_id'])[_0x51e861(0x188)]();if(!_0x59f546)return _0x1b32ca[_0x51e861(0x177)](0x191);const _0x4686b4=(0x0,jwtController_1['generateAccessToken'])(Object['assign'](Object[_0x51e861(0x1a6)]({},_0x59f546),{'role':_0x51e861(0x192)})),_0x4a86c5=(0x0,jwtController_1[_0x51e861(0x173)])(Object[_0x51e861(0x1a6)](Object[_0x51e861(0x1a6)]({},_0x59f546),{'role':_0x51e861(0x192)}));_0x1b32ca[_0x51e861(0x18a)](_0x51e861(0x17d),_0x4686b4,{'httpOnly':![],'secure':!![],'sameSite':'none','maxAge':0x3e8*0x3c*0x3c*0x18})[_0x51e861(0x18a)](_0x51e861(0x16f),_0x4a86c5,{'httpOnly':![],'secure':!![],'sameSite':_0x51e861(0x1a9),'maxAge':0x3e8*0x3c*0x3c*0x18*0x7})[_0x51e861(0x17f)](_0x51e861(0x19f));}catch(_0x3637b6){_0x1b32ca[_0x51e861(0x186)](0x191)['send'](_0x51e861(0x1a0));}});exports[a5_0x357a3a(0x1a2)]=getRefreshToken;const centreDashboard=(_0x1311d5,_0x5bc73e)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1d9056=a5_0x357a3a;var _0x27f4e2;const _0xcf1536=yield(0x0,httpService_1['httpService'])(_0x1d9056(0x18b),{'headers':{'centreid':(_0x27f4e2=_0x1311d5[_0x1d9056(0x184)])===null||_0x27f4e2===void 0x0?void 0x0:_0x27f4e2[_0x1d9056(0x196)][_0x1d9056(0x18f)]()}});_0x5bc73e[_0x1d9056(0x186)](_0xcf1536[_0x1d9056(0x186)])[_0x1d9056(0x17f)](_0xcf1536[_0x1d9056(0x16e)]);});exports[a5_0x357a3a(0x175)]=centreDashboard;const centreDetail=(_0x4e8958,_0x1904f2)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5a2053=a5_0x357a3a,_0x5a3893=yield centreModel_1[_0x5a2053(0x179)][_0x5a2053(0x198)]();_0x1904f2[_0x5a2053(0x17f)](_0x5a3893);});exports[a5_0x357a3a(0x191)]=centreDetail;