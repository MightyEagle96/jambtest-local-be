'use strict';const a7_0x237928=a7_0x178e;(function(_0x5334c9,_0xc406ad){const _0x43db65=a7_0x178e,_0x43bf35=_0x5334c9();while(!![]){try{const _0x32951f=parseInt(_0x43db65(0xf2))/0x1*(parseInt(_0x43db65(0xe3))/0x2)+-parseInt(_0x43db65(0xf5))/0x3+-parseInt(_0x43db65(0xc9))/0x4*(parseInt(_0x43db65(0xca))/0x5)+-parseInt(_0x43db65(0xef))/0x6+-parseInt(_0x43db65(0xce))/0x7*(parseInt(_0x43db65(0xbf))/0x8)+parseInt(_0x43db65(0xda))/0x9+parseInt(_0x43db65(0xc1))/0xa;if(_0x32951f===_0xc406ad)break;else _0x43bf35['push'](_0x43bf35['shift']());}catch(_0xccc58d){_0x43bf35['push'](_0x43bf35['shift']());}}}(a7_0x44f5,0x3e797));function a7_0x178e(_0x393c07,_0x213001){const _0x44f506=a7_0x44f5();return a7_0x178e=function(_0x178e59,_0x4fcb1b){_0x178e59=_0x178e59-0xb7;let _0x3c364f=_0x44f506[_0x178e59];return _0x3c364f;},a7_0x178e(_0x393c07,_0x213001);}var __awaiter=this&&this['__awaiter']||function(_0x321722,_0x2c0599,_0x2c4d12,_0x1f6660){function _0x38157c(_0x3e29f5){return _0x3e29f5 instanceof _0x2c4d12?_0x3e29f5:new _0x2c4d12(function(_0x150660){_0x150660(_0x3e29f5);});}return new(_0x2c4d12||(_0x2c4d12=Promise))(function(_0x5c84e7,_0x2fae2c){const _0x19381c=a7_0x178e;function _0x3bb3ee(_0x57b898){const _0x2b2f98=a7_0x178e;try{_0x19b1f7(_0x1f6660[_0x2b2f98(0xe8)](_0x57b898));}catch(_0x3b35c7){_0x2fae2c(_0x3b35c7);}}function _0x54aae0(_0x215c0f){const _0x15ecfa=a7_0x178e;try{_0x19b1f7(_0x1f6660[_0x15ecfa(0xd5)](_0x215c0f));}catch(_0x38c19e){_0x2fae2c(_0x38c19e);}}function _0x19b1f7(_0x2f2a72){const _0x4abc83=a7_0x178e;_0x2f2a72['done']?_0x5c84e7(_0x2f2a72[_0x4abc83(0xc2)]):_0x38157c(_0x2f2a72[_0x4abc83(0xc2)])['then'](_0x3bb3ee,_0x54aae0);}_0x19b1f7((_0x1f6660=_0x1f6660['apply'](_0x321722,_0x2c0599||[]))[_0x19381c(0xe8)]());});},__importDefault=this&&this[a7_0x237928(0xec)]||function(_0x24f457){const _0x4790eb=a7_0x237928;return _0x24f457&&_0x24f457[_0x4790eb(0xe2)]?_0x24f457:{'default':_0x24f457};};Object[a7_0x237928(0xba)](exports,'__esModule',{'value':!![]}),exports['centreDetail']=exports[a7_0x237928(0xd8)]=exports['getRefreshToken']=exports['centreProfile']=exports[a7_0x237928(0xdc)]=exports[a7_0x237928(0xb9)]=void 0x0;const httpService_1=require('../httpService'),centreModel_1=__importDefault(require(a7_0x237928(0xc3))),jwtController_1=require(a7_0x237928(0xcb)),jsonwebtoken_1=__importDefault(require('jsonwebtoken')),computerModel_1=__importDefault(require(a7_0x237928(0xc4))),networkTest_1=__importDefault(require(a7_0x237928(0xf4))),loginAccount=(_0x21dbcf,_0x9116b4)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x394755=a7_0x237928;try{const _0x8f58b3=yield httpService_1[_0x394755(0xbb)][_0x394755(0xd9)]('centre/login',_0x21dbcf['body']);if(_0x8f58b3[_0x394755(0xd6)]!==0xc8)return _0x9116b4[_0x394755(0xea)](_0x394755(0xf0))[_0x394755(0xea)]('refreshToken')['status'](_0x8f58b3[_0x394755(0xd6)])[_0x394755(0xdf)](_0x8f58b3[_0x394755(0xcc)]);const {centre:_0x5c7bcb,computers:_0x2fe629,networkTests:_0x20f0f5}=_0x8f58b3[_0x394755(0xcc)];if(!_0x5c7bcb||!_0x2fe629||!_0x20f0f5)return _0x9116b4[_0x394755(0xd6)](0x190)[_0x394755(0xdf)]('Incomplete\x20response\x20data');yield Promise['all']([centreModel_1[_0x394755(0xb8)][_0x394755(0xde)](),computerModel_1[_0x394755(0xb8)][_0x394755(0xde)](),networkTest_1[_0x394755(0xb8)][_0x394755(0xde)]()]),yield centreModel_1[_0x394755(0xb8)][_0x394755(0xcf)](_0x5c7bcb),yield computerModel_1['default'][_0x394755(0xe5)](_0x2fe629),yield networkTest_1['default'][_0x394755(0xe5)](_0x20f0f5);const _0x41299c=(0x0,jwtController_1['generateAccessToken'])(Object[_0x394755(0xeb)](Object[_0x394755(0xeb)]({},_0x5c7bcb),{'role':'admin'})),_0x485900=(0x0,jwtController_1[_0x394755(0xc0)])(Object[_0x394755(0xeb)](Object[_0x394755(0xeb)]({},_0x5c7bcb),{'role':'admin'}));_0x9116b4[_0x394755(0xd2)](_0x394755(0xf0),_0x41299c,{'httpOnly':![],'secure':!![],'sameSite':_0x394755(0xd1),'maxAge':0x3e8*0x3c*0x3c*0x18})[_0x394755(0xd2)](_0x394755(0xee),_0x485900,{'httpOnly':![],'secure':!![],'sameSite':_0x394755(0xd1),'maxAge':0x3e8*0x3c*0x3c*0x18*0x7})[_0x394755(0xdf)](_0x394755(0xd7));}catch(_0x659bcb){console[_0x394755(0xc8)](_0x394755(0xe1),_0x659bcb[_0x394755(0xf3)]),_0x9116b4[_0x394755(0xd6)](0x1f4)[_0x394755(0xdf)](_0x394755(0xe0));}});exports[a7_0x237928(0xb9)]=loginAccount;const logoutAccount=(_0x3db15d,_0x113e4d)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x3269a8=a7_0x237928;yield Promise[_0x3269a8(0xcd)]([centreModel_1[_0x3269a8(0xb8)]['deleteMany'](),computerModel_1['default'][_0x3269a8(0xde)]()]),_0x113e4d[_0x3269a8(0xea)](_0x3269a8(0xf0))['clearCookie']('refreshToken')[_0x3269a8(0xdf)](_0x3269a8(0xd7));});exports['logoutAccount']=logoutAccount;const centreProfile=(_0x273bc5,_0x5c72d1)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x28cc47=a7_0x237928;_0x5c72d1[_0x28cc47(0xdf)](_0x273bc5['centre']);});exports[a7_0x237928(0xb7)]=centreProfile;function a7_0x44f5(){const _0x173204=['__esModule','32222gFRZWp','centreDetail','insertMany','centre','generateAccessToken','next','findById','clearCookie','assign','__importDefault','_id','refreshToken','2907390XnFAzs','accessToken','toString','27DApdBm','message','../models/networkTest','92385jStRJz','centreProfile','default','loginAccount','defineProperty','httpService','findOne','admin','Invalid\x20refresh\x20token','64mWsOig','generateRefreshToken','7337960WyabjW','value','../models/centreModel','../models/computerModel','tokens','cookies','lean','error','790692amKrNl','10HITlxi','./jwtController','data','all','379274fTXErv','create','env','none','cookie','REFRESH_TOKEN','centre/dashboard','throw','status','Success','centreDashboard','post','3881376epQzkz','sendStatus','logoutAccount','verify','deleteMany','send','Something\x20went\x20wrong','Login\x20error:'];a7_0x44f5=function(){return _0x173204;};return a7_0x44f5();}const getRefreshToken=(_0x235066,_0xb63d5b)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5c42d2=a7_0x237928,_0x38e6aa=_0x235066[_0x5c42d2(0xc6)][jwtController_1[_0x5c42d2(0xc5)]['refreshToken']];if(!_0x38e6aa)return _0xb63d5b[_0x5c42d2(0xdb)](0x191);try{const _0x595524=jsonwebtoken_1[_0x5c42d2(0xb8)][_0x5c42d2(0xdd)](_0x38e6aa,process[_0x5c42d2(0xd0)][_0x5c42d2(0xd3)]),_0x35d0ca=yield centreModel_1['default'][_0x5c42d2(0xe9)](_0x595524[_0x5c42d2(0xed)])[_0x5c42d2(0xc7)]();if(!_0x35d0ca)return _0xb63d5b[_0x5c42d2(0xdb)](0x191);const _0x31b885=(0x0,jwtController_1[_0x5c42d2(0xe7)])(Object[_0x5c42d2(0xeb)](Object['assign']({},_0x35d0ca),{'role':_0x5c42d2(0xbd)})),_0x54d321=(0x0,jwtController_1[_0x5c42d2(0xc0)])(Object[_0x5c42d2(0xeb)](Object[_0x5c42d2(0xeb)]({},_0x35d0ca),{'role':_0x5c42d2(0xbd)}));_0xb63d5b[_0x5c42d2(0xd2)](_0x5c42d2(0xf0),_0x31b885,{'httpOnly':![],'secure':!![],'sameSite':'none','maxAge':0x3e8*0x3c*0x3c*0x18})[_0x5c42d2(0xd2)]('refreshToken',_0x54d321,{'httpOnly':![],'secure':!![],'sameSite':_0x5c42d2(0xd1),'maxAge':0x3e8*0x3c*0x3c*0x18*0x7})[_0x5c42d2(0xdf)](_0x5c42d2(0xd7));}catch(_0x1152c6){_0xb63d5b[_0x5c42d2(0xd6)](0x191)[_0x5c42d2(0xdf)](_0x5c42d2(0xbe));}});exports['getRefreshToken']=getRefreshToken;const centreDashboard=(_0x21aefc,_0x470164)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2adc2b=a7_0x237928;var _0x3d51d5;const _0x3a4811=yield(0x0,httpService_1[_0x2adc2b(0xbb)])(_0x2adc2b(0xd4),{'headers':{'centreid':(_0x3d51d5=_0x21aefc[_0x2adc2b(0xe6)])===null||_0x3d51d5===void 0x0?void 0x0:_0x3d51d5[_0x2adc2b(0xed)][_0x2adc2b(0xf1)]()}});_0x470164[_0x2adc2b(0xd6)](_0x3a4811[_0x2adc2b(0xd6)])[_0x2adc2b(0xdf)](_0x3a4811[_0x2adc2b(0xcc)]);});exports[a7_0x237928(0xd8)]=centreDashboard;const centreDetail=(_0x417205,_0x3dacbf)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x4fd96e=a7_0x237928,_0x5862f0=yield centreModel_1[_0x4fd96e(0xb8)][_0x4fd96e(0xbc)]();_0x3dacbf[_0x4fd96e(0xdf)](_0x5862f0);});exports[a7_0x237928(0xe4)]=centreDetail;