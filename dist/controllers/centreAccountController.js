'use strict';const a8_0x3f4915=a8_0x34a9;(function(_0x34b548,_0x1d1e8f){const _0x2bd42e=a8_0x34a9,_0x4df900=_0x34b548();while(!![]){try{const _0x48742f=parseInt(_0x2bd42e(0x160))/0x1*(parseInt(_0x2bd42e(0x188))/0x2)+-parseInt(_0x2bd42e(0x189))/0x3+-parseInt(_0x2bd42e(0x18b))/0x4*(parseInt(_0x2bd42e(0x167))/0x5)+parseInt(_0x2bd42e(0x16e))/0x6+-parseInt(_0x2bd42e(0x162))/0x7+parseInt(_0x2bd42e(0x18f))/0x8*(-parseInt(_0x2bd42e(0x18a))/0x9)+parseInt(_0x2bd42e(0x17c))/0xa;if(_0x48742f===_0x1d1e8f)break;else _0x4df900['push'](_0x4df900['shift']());}catch(_0x3e2e8c){_0x4df900['push'](_0x4df900['shift']());}}}(a8_0x1c7c,0x2f688));var __awaiter=this&&this['__awaiter']||function(_0x28fbc8,_0x2fc11c,_0x1d6f5e,_0xd45aec){function _0x19bc1e(_0x500db2){return _0x500db2 instanceof _0x1d6f5e?_0x500db2:new _0x1d6f5e(function(_0xc1a32c){_0xc1a32c(_0x500db2);});}return new(_0x1d6f5e||(_0x1d6f5e=Promise))(function(_0x2ee6ec,_0x1c4f26){const _0xcaee87=a8_0x34a9;function _0x2b3cd3(_0x3ba8bd){const _0x43dcc6=a8_0x34a9;try{_0x48038f(_0xd45aec[_0x43dcc6(0x169)](_0x3ba8bd));}catch(_0x56afdb){_0x1c4f26(_0x56afdb);}}function _0x575417(_0x127cdd){const _0x32d65b=a8_0x34a9;try{_0x48038f(_0xd45aec[_0x32d65b(0x158)](_0x127cdd));}catch(_0x1a526b){_0x1c4f26(_0x1a526b);}}function _0x48038f(_0x45fbb5){const _0xc86da2=a8_0x34a9;_0x45fbb5['done']?_0x2ee6ec(_0x45fbb5[_0xc86da2(0x191)]):_0x19bc1e(_0x45fbb5[_0xc86da2(0x191)])['then'](_0x2b3cd3,_0x575417);}_0x48038f((_0xd45aec=_0xd45aec[_0xcaee87(0x16c)](_0x28fbc8,_0x2fc11c||[]))[_0xcaee87(0x169)]());});},__importDefault=this&&this[a8_0x3f4915(0x171)]||function(_0xe471e3){return _0xe471e3&&_0xe471e3['__esModule']?_0xe471e3:{'default':_0xe471e3};};function a8_0x1c7c(){const _0x517374=['assign','none','__importDefault','env','data','body','cookie','centre/login','accessToken','status','refreshToken','error','insertMany','5396440dmjoqe','../models/computerModel','jsonwebtoken','lean','Success','send','../models/networkTest','logoutAccount','sendStatus','verify','post','REFRESH_TOKEN','23116VXyJyb','1016466rpDblH','9ThQEdj','496qfeznc','centreDetail','deleteMany','tokens','2911544BXdfhY','Login\x20error:','value','all','findById','Invalid\x20refresh\x20token','toString','message','httpService','getRefreshToken','throw','Incomplete\x20response\x20data','findOne','centreDashboard','__esModule','_id','defineProperty','default','27hYNyrN','../models/centreModel','612647eVItIA','centreProfile','admin','Something\x20went\x20wrong','centre','670fJRPdV','cookies','next','generateAccessToken','create','apply','clearCookie','896256dDKAoR'];a8_0x1c7c=function(){return _0x517374;};return a8_0x1c7c();}Object[a8_0x3f4915(0x15e)](exports,a8_0x3f4915(0x15c),{'value':!![]}),exports[a8_0x3f4915(0x18c)]=exports[a8_0x3f4915(0x15b)]=exports[a8_0x3f4915(0x157)]=exports[a8_0x3f4915(0x163)]=exports[a8_0x3f4915(0x183)]=exports['loginAccount']=void 0x0;const httpService_1=require('../httpService'),centreModel_1=__importDefault(require(a8_0x3f4915(0x161))),jwtController_1=require('./jwtController'),jsonwebtoken_1=__importDefault(require(a8_0x3f4915(0x17e))),computerModel_1=__importDefault(require(a8_0x3f4915(0x17d))),networkTest_1=__importDefault(require(a8_0x3f4915(0x182))),loginAccount=(_0x140210,_0x4bdf01)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0xad8b7=a8_0x3f4915;try{const _0x42024a=yield httpService_1['httpService'][_0xad8b7(0x186)](_0xad8b7(0x176),_0x140210[_0xad8b7(0x174)]);if(_0x42024a['status']!==0xc8)return _0x4bdf01[_0xad8b7(0x16d)]('accessToken')[_0xad8b7(0x16d)](_0xad8b7(0x179))[_0xad8b7(0x178)](_0x42024a[_0xad8b7(0x178)])[_0xad8b7(0x181)](_0x42024a['data']);const {centre:_0x4243ee,computers:_0x1f22fc,networkTests:_0x49bb20}=_0x42024a[_0xad8b7(0x173)];if(!_0x4243ee||!_0x1f22fc||!_0x49bb20)return _0x4bdf01[_0xad8b7(0x178)](0x190)[_0xad8b7(0x181)](_0xad8b7(0x159));yield Promise[_0xad8b7(0x192)]([centreModel_1[_0xad8b7(0x15f)]['deleteMany'](),computerModel_1[_0xad8b7(0x15f)][_0xad8b7(0x18d)](),networkTest_1[_0xad8b7(0x15f)][_0xad8b7(0x18d)]()]),yield centreModel_1['default'][_0xad8b7(0x16b)](_0x4243ee),yield computerModel_1[_0xad8b7(0x15f)][_0xad8b7(0x17b)](_0x1f22fc),yield networkTest_1[_0xad8b7(0x15f)]['insertMany'](_0x49bb20);const _0x471fa2=(0x0,jwtController_1['generateAccessToken'])(Object[_0xad8b7(0x16f)](Object[_0xad8b7(0x16f)]({},_0x4243ee),{'role':_0xad8b7(0x164)})),_0x22c623=(0x0,jwtController_1['generateRefreshToken'])(Object[_0xad8b7(0x16f)](Object[_0xad8b7(0x16f)]({},_0x4243ee),{'role':_0xad8b7(0x164)}));_0x4bdf01['cookie'](_0xad8b7(0x177),_0x471fa2,{'httpOnly':![],'secure':!![],'sameSite':_0xad8b7(0x170),'maxAge':0x3e8*0x3c*0x3c*0x18})[_0xad8b7(0x175)](_0xad8b7(0x179),_0x22c623,{'httpOnly':![],'secure':!![],'sameSite':_0xad8b7(0x170),'maxAge':0x3e8*0x3c*0x3c*0x18*0x7})[_0xad8b7(0x181)](_0xad8b7(0x180));}catch(_0x53bfd9){console[_0xad8b7(0x17a)](_0xad8b7(0x190),_0x53bfd9[_0xad8b7(0x155)]),_0x4bdf01[_0xad8b7(0x178)](0x1f4)[_0xad8b7(0x181)](_0xad8b7(0x165));}});exports['loginAccount']=loginAccount;const logoutAccount=(_0x5c95bb,_0x27b469)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x179723=a8_0x3f4915;yield Promise[_0x179723(0x192)]([centreModel_1['default']['deleteMany'](),computerModel_1[_0x179723(0x15f)][_0x179723(0x18d)]()]),_0x27b469[_0x179723(0x16d)](_0x179723(0x177))[_0x179723(0x16d)]('refreshToken')['send']('Success');});exports[a8_0x3f4915(0x183)]=logoutAccount;const centreProfile=(_0x41f4c9,_0xce2e1d)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x6143a3=a8_0x3f4915;_0xce2e1d[_0x6143a3(0x181)](_0x41f4c9[_0x6143a3(0x166)]);});exports[a8_0x3f4915(0x163)]=centreProfile;function a8_0x34a9(_0x47b559,_0x3e45b8){const _0x1c7c26=a8_0x1c7c();return a8_0x34a9=function(_0x34a90b,_0x366321){_0x34a90b=_0x34a90b-0x152;let _0xe9696f=_0x1c7c26[_0x34a90b];return _0xe9696f;},a8_0x34a9(_0x47b559,_0x3e45b8);}const getRefreshToken=(_0x1771ff,_0x5f5917)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0xfaddaf=a8_0x3f4915,_0x4888f8=_0x1771ff[_0xfaddaf(0x168)][jwtController_1[_0xfaddaf(0x18e)][_0xfaddaf(0x179)]];if(!_0x4888f8)return _0x5f5917[_0xfaddaf(0x184)](0x191);try{const _0x1b2d44=jsonwebtoken_1[_0xfaddaf(0x15f)][_0xfaddaf(0x185)](_0x4888f8,process[_0xfaddaf(0x172)][_0xfaddaf(0x187)]),_0x179698=yield centreModel_1[_0xfaddaf(0x15f)][_0xfaddaf(0x152)](_0x1b2d44[_0xfaddaf(0x15d)])[_0xfaddaf(0x17f)]();if(!_0x179698)return _0x5f5917[_0xfaddaf(0x184)](0x191);const _0x51b6a3=(0x0,jwtController_1[_0xfaddaf(0x16a)])(Object[_0xfaddaf(0x16f)](Object[_0xfaddaf(0x16f)]({},_0x179698),{'role':'admin'})),_0x253c8f=(0x0,jwtController_1['generateRefreshToken'])(Object[_0xfaddaf(0x16f)](Object[_0xfaddaf(0x16f)]({},_0x179698),{'role':'admin'}));_0x5f5917['cookie']('accessToken',_0x51b6a3,{'httpOnly':![],'secure':!![],'sameSite':'none','maxAge':0x3e8*0x3c*0x3c*0x18})[_0xfaddaf(0x175)](_0xfaddaf(0x179),_0x253c8f,{'httpOnly':![],'secure':!![],'sameSite':_0xfaddaf(0x170),'maxAge':0x3e8*0x3c*0x3c*0x18*0x7})[_0xfaddaf(0x181)]('Success');}catch(_0x422add){_0x5f5917[_0xfaddaf(0x178)](0x191)[_0xfaddaf(0x181)](_0xfaddaf(0x153));}});exports[a8_0x3f4915(0x157)]=getRefreshToken;const centreDashboard=(_0xcd912c,_0x4c6afa)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x3e507a=a8_0x3f4915;var _0x491354;const _0x1ac182=yield(0x0,httpService_1[_0x3e507a(0x156)])('centre/dashboard',{'headers':{'centreid':(_0x491354=_0xcd912c[_0x3e507a(0x166)])===null||_0x491354===void 0x0?void 0x0:_0x491354[_0x3e507a(0x15d)][_0x3e507a(0x154)]()}});_0x4c6afa[_0x3e507a(0x178)](_0x1ac182[_0x3e507a(0x178)])[_0x3e507a(0x181)](_0x1ac182[_0x3e507a(0x173)]);});exports[a8_0x3f4915(0x15b)]=centreDashboard;const centreDetail=(_0x1002f9,_0x4a87dc)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x36ca57=a8_0x3f4915,_0x5ebd5a=yield centreModel_1[_0x36ca57(0x15f)][_0x36ca57(0x15a)]();_0x4a87dc['send'](_0x5ebd5a);});exports[a8_0x3f4915(0x18c)]=centreDetail;